<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile"
      >

    <h:head>
        <link rel="icon" type="image/x-icon" href="favicon.ico" />
        <title>GraphicMakers</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
        <h:outputStylesheet library="css" name="estilo.css"/>
        <h:outputStylesheet library="css" name="font-awesome.min.css"/>
        <script type="text/javascript" src="anfora.js"/>
        <script type="text/javascript" src="es.js"/>
        <h:outputScript library="primefaces" name="jquery/jquery.js" />


    </h:head>

    <h:body id="mBody" onload="PF('bar').show()" >

        <!--********************************************************************
        ************************** Manejo de sesiones **************************
        *********************************************************************-->

        <h:form id="frmIdle">

            <p:idleMonitor  onidle="PF('sessionTerminada').show();" timeout="#{session.maxInactiveInterval}" >
                <p:ajax event="idle" listener="#{conexion.logout}" process="@form" />
            </p:idleMonitor>
        </h:form>  

        <p:dialog header="Sesión caducada" widgetVar="sessionTerminada"
                  modal="true" closable="false" width="400" visible="false" resizable="false">
            <h:form>
                <h:panelGrid columns="1" style="vertical-align: middle; text-align: center; border-style: none">
                    <h:panelGrid columns="2" style="vertical-align: middle; text-align: center; border-style: none">
                        <h:outputText value="La sesión ha caducado por inactividad, por favor, pulse sobre el botón 'Iniciar Sesión' para volver a acceder a la aplicación" />
                        <p:graphicImage url="/resources/images/desconectado.png"  /> 
                    </h:panelGrid>

                    <p:commandButton id="confirmBackToLogin" type="button" value="Iniciar sesión"
                                     onclick="window.location = '#{request.contextPath}';" />
                </h:panelGrid>
            </h:form>
        </p:dialog>


        <!--********************************************************************
        ************************** Ventana Ocuapado ****************************
        *********************************************************************-->
        <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
            <h:graphicImage value="/resources/images/loading_bar.gif" />
        </p:dialog>



        <!--********************************************************************
        ************************** Barra de Menú *******************************
        *********************************************************************-->

        <h:form id="frmMadre">
            <p:menubar id="menumadre">
               
                <p:submenu label="Centro de servicios" icon="fa fa-calculator" >
                     <p:menuitem value="Clientes" 
                                icon="fa fa-search"
                                onclick="PF('wClientesMain').show()"
                                actionListener="#{man_clientes.iniciarventana()}"
                                update=":frmClientesMain"
                                />
                    <p:menuitem value="Facturar" 
                                icon="fa fa-credit-card"
                                onclick="PF('wFacturacion').show()"
                                actionListener="#{man_Facturacion.iniciarventana()}"
                                update=":frmFacturacion"
                                />
                    <p:menuitem value="Pagos" 
                                icon="fa fa-usd"
                                />
                    <p:menuitem value="Cierre" 
                                icon="fa fa-balance-scale"
                                />

                </p:submenu>
               
                <p:submenu label="Producción" icon="fa fa-print" >
                    <p:menuitem value="Orden de Trabajo" 
                                icon="fa fa-scissors"
                                onclick="PF('wInventarioArt').show()"
                                actionListener="#{man_inventario.iniciarventana()}"
                                update=":frmInventarioArt"
                                />
                    
                    <p:menuitem value="Control Producción" 
                                icon="fa fa-cubes"
                                onclick="PF('wInventarioArt').show()"
                                actionListener="#{man_inventario.iniciarventana()}"
                                update=":frmInventarioArt"
                                />
                </p:submenu>
                
                <p:submenu label="Compras" icon="fa fa-cart-arrow-down">
                    <p:menuitem value="Control" 
                                icon="fa fa-search"
                                onclick="PF('wClientesMain').show()"
                                actionListener="#{man_clientes.iniciarventana()}"
                                update=":frmClientesMain"
                                />
                </p:submenu>

                <p:submenu label="Inventario" icon="fa fa-list" >
                    <p:menuitem value="Productos" 
                                icon="fa fa-picture-o"
                                onclick="PF('wInventarioArt').show()"
                                actionListener="#{man_inventario.iniciarventana()}"
                                update=":frmInventarioArt"
                                />
                    
                    <p:menuitem value="Existencias" 
                                icon="fa fa-cubes"
                                onclick="PF('wInventarioArt').show()"
                                actionListener="#{man_inventario.iniciarventana()}"
                                update=":frmInventarioArt"
                                />
                </p:submenu>
                
                 <p:submenu label="Reportes" icon="fa fa-bar-chart">
                    <p:menuitem value="Control" 
                                icon="fa fa-search"
                                onclick="PF('wClientesMain').show()"
                                actionListener="#{man_clientes.iniciarventana()}"
                                update=":frmClientesMain"
                                />
                </p:submenu>


                <p:submenu label="Configuración" icon="fa fa-cogs" style=" visibility: visible;" >
                    <p:submenu label="Generales" icon="fa fa-database" >
                        <p:menuitem value="Sucursal y Bodega" 
                                    icon="fa fa-building-o"
                                    onclick="PF('wSucBod').show()"
                                    actionListener="#{man_sucursalesbodegas.iniciarventana()}"
                                    update=":frmSucBod"
                                    />
                    </p:submenu>
                    <p:submenu label="Facturación" icon="fa fa-credit-card" >
                        <p:menuitem value="Lista Servicios" 
                                    icon="fa fa-list"
                                    />
                        <p:menuitem value="Bancos" 
                                    icon="fa fa-bank"
                                    />

                    </p:submenu>
                    <p:submenu label="Pagos" icon="fa fa-usd" >
                        <p:menuitem value="Proveedores" 
                                    icon="fa fa-users"
                                    />

                    </p:submenu>
                  
                    <p:submenu label="Seguridad" icon="fa fa-lock" >
                        <p:menuitem value="Usuarios" 
                                    icon="fa fa-user-circle-o"
                                    />
                    </p:submenu>

                </p:submenu>



                <f:facet name="options">
                    <p:commandButton value="Logout" icon="ui-icon-extlink"
                                     actionListener="#{login.endConversation()}"
                                     update=":frmMadre"
                                     action="index?faces-redirect=true"
                                     />
                </f:facet>
            </p:menubar>



            <!--****************** ConfirmDialog Global *********************-->
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Sí" type="button" 
                                 styleClass="ui-confirmdialog-yes" 
                                 icon="ui-icon-check" />
                <p:commandButton value="No" type="button" 
                                 styleClass="ui-confirmdialog-no" 
                                 icon="ui-icon-close" />
            </p:confirmDialog>

            <!--**************************** Logo ***************************-->
            <h:graphicImage  id="logoGM" value="/logoGM.png" width="450" height="430" 
                             style=" position: absolute; top:0;bottom:0;right:0;left:0;margin: auto;"/>


        </h:form>

        <!--******************************************************************** 
        *************************Barra Notificación ****************************
        *********************************************************************-->

        <h:form id="frmNB"> 
            <p:notificationBar id="nbMadre" position="bottom" effect="slide"
                               widgetVar="bar" style="color:#00a3cf; height: 50px;">

                <h:panelGrid  columns="1" cellpadding="1">
                    <h:outputText value="Usuario: &lt;font color='red'&gt; #{login.det_nom} &lt;/font&gt;&lt;br /&gt;Departamento: &lt;font color='red'&gt; #{login.nomdep} &lt;/font&gt;"
                                  escape="false"
                                  style="font-size:14px; position: absolute; top:5%;right:45%;bottom:0;margin: auto; "
                                  />

                    <h:graphicImage  id="cclogo" value="/nube.gif" width="60" height="55" 
                                     style=" position: absolute; top:0;right:10%;bottom:0;margin: auto; "/>

                    <h:graphicImage  id="GMlogo2" value="/logo2.png" width="270" height="60" 
                                     style=" position: absolute; top:0;right:80%;bottom:0;margin: auto; "/>
                </h:panelGrid>
            </p:notificationBar>
        </h:form>
        
        
        <!-- **************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************    CENTRO DE SERVICIOS  **************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************************************************************************************************************-->

        <!-- *******************************************************************
        ************************** CONTROL DE CLIENTES *************************
        *********************************************************************-->

        <p:dialog  id="dlgClientesMain" widgetVar="wClientesMain" modal="true" 
                   width="800" height="370" closable="false" resizable="false" 
                   header="Clientes" rendered="true" 
                   dynamic="false" visible="false" style=" background-color: #deedf7;"
                   >

            <h:form id="frmClientesMain"> 
                <p:growl id="msgClientesMain" showDetail="true" life="8000"/>
                <p:toolbar >
                    <f:facet name="left">
                        <p:commandButton value="Editar" styleClass="BotonEditar"
                                         update=":frmClientesEdit"
                                         icon="fa fa-user-plus"
                                         onclick="PF('wClientesEdit').show()"
                                         />
                        <p:commandButton value="Historia" styleClass="BotonHistoria"
                                         icon="fa fa-history"
                                         actionListener="#{man_clientes.iniciarventanaHistoria()}"
                                         />
                        <p:commandButton value="Eliminar" styleClass="BotonEliminar"
                                         update=":frmClientesMain"
                                         icon="fa fa-trash-o"
                                         actionListener="#{man_clientes.eliminar()}"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wClientesMain').hide()"
                                         update=":frmClientesMain"
                                         icon="fa fa-times"
                                         actionListener="#{man_clientes.cerrarventana()}"
                                         />

                    </f:facet>
                </p:toolbar>

                <div style=" background-color: #435055;">
                    <h:panelGrid columns="3" cellpadding="5">
                        <h:outputText value="Buscar" style="font-weight:bold; color:  white;" />
                        <p:inputText maxlength="50" size="100" value="#{man_clientes.cadenabuscar}" 
                                     onfocus="this.select()"/>
                        <p:commandButton title="Buscar" style=" width: 50px;"
                                         icon="fa fa-search"
                                         actionListener="#{man_clientes.buscarClientes()}"
                                         update=":frmClientesMain"
                                         />
                    </h:panelGrid>
                </div>
                <p:dataTable id="dtClientesMain" var="vClientesMain" 
                             value="#{man_clientes.clientes}" 
                             emptyMessage="No se encontraron resultados" 
                             selectionMode="single" selection="#{man_clientes.catclientes}" 
                             rowKey="#{vClientesMain.cod_cli}"
                             editable="false" 
                             style="width:778px"
                             scrollable="true"
                             scrollHeight="225"
                             >
                    <p:ajax event="rowSelect" listener="#{man_clientes.onRowSelectBuscar}" 
                            update=":frmClientesMain" />

                    <p:column style="width:30px" headerText="Nombres">
                        <h:outputText value="#{vClientesMain.nom_cli}" />
                    </p:column>
                    <p:column style="width:50px" headerText="Apellidos">
                        <h:outputText value="#{vClientesMain.ape_cli}" />
                    </p:column>
                    <p:column style="width:30px" headerText="Teléfono">
                        <h:outputText value="#{vClientesMain.tel_con}" />
                    </p:column>
                    <p:column style="width:30px" headerText="Celular">
                        <h:outputText value="#{vClientesMain.tel_cel}" />
                    </p:column>
                </p:dataTable>


            </h:form>
        </p:dialog>  

        <p:dialog  id="dlgClientesEdit" widgetVar="wClientesEdit" modal="true" 
                   width="800" height="530" closable="false" resizable="false" 
                   header="Editar Información Cliente" rendered="true" 
                   dynamic="false" visible="false" style=" background-color: #deedf7;"
                   >

            <h:form id="frmClientesEdit"> 
                <p:growl id="msgClientesEdit" showDetail="true" life="8000"/>
                <p:toolbar >
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" styleClass="BotonNuevo"
                                         update=":frmClientesEdit"
                                         icon="fa fa-user-plus"
                                         actionListener="#{man_clientes.nuevoEdit()}"
                                         />
                        <p:commandButton value="Guardar" styleClass="BotonGuardar"
                                         update=":frmClientesEdit"
                                         icon="fa fa-floppy-o"
                                         actionListener="#{man_clientes.guardar()}"
                                         >
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wClientesEdit').hide()"
                                         update=":frmClientesMain"
                                         icon="fa fa-times"
                                         actionListener="#{man_clientes.cerrarventanaEdit()}"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel header="Datos Generales">
                    <div style=" background-color: #435055;">
                        <h:panelGrid columns="3" cellpadding="5">
                            <h:outputText value="Persona Natural" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Nombre" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Apellidos" style="font-weight:bold; color:  white;" />
                            <p:selectBooleanButton value="#{man_clientes.flg_nat_emp}" offLabel="Sí" onLabel="No" offIcon="fa fa-user" onIcon="fa fa-industry" />
                            <p:inputText value="#{man_clientes.nom_cli}" size="40" maxlength="75" />
                            <p:inputText value="#{man_clientes.ape_cli}" size="40" maxlength="75" />

                            <h:outputText value="Teléfono Fijo" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Celular" style="font-weight:bold; color:  white;" />
                            <h:outputText value="e-mail" style="font-weight:bold; color:  white;" />
                            <p:inputText value="#{man_clientes.tel_con}" size="20" maxlength="20" />
                            <p:inputText value="#{man_clientes.tel_cel}" size="40" maxlength="20" />
                            <p:inputText value="#{man_clientes.det_mai}" size="40" maxlength="100" />

                            <h:outputText value="Documento Id." style="font-weight:bold; color:  white;" />
                            <h:outputText value="Fecha Nacimiento" style="font-weight:bold; color:  white;" />
                            <h:outputText value="" style="font-weight:bold; color:  white;" />
                            <p:inputText value="#{man_clientes.doc_ide}" size="20" maxlength="20" />
                            <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                         readonlyInput="true" 
                                         showOn="button" 
                                         size="12"
                                         style="width: 12px"
                                         navigator="true"
                                         value="#{man_clientes.dfechanac}"
                                         >
                                <p:ajax event="dateSelect" listener="#{man_clientes.dateSelectedNacimiento}" />
                            </p:calendar>
                        </h:panelGrid>
                        <h:panelGrid columns="1" cellpadding="5">    
                            <h:outputText value="Dirección" style="font-weight:bold; color:  white;" />
                            <p:inputTextarea value="#{man_clientes.det_dir}" rows="2" cols="105" maxlength="200"/>
                        </h:panelGrid>
                    </div>
                </p:panel>
                <p:panel header="Datos Adicionales para Empresas">
                    <div style=" background-color: #435055;">
                        <h:panelGrid columns="3" cellpadding="5">
                            <h:outputText value="NIT" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Giro" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Persona Contacto" style="font-weight:bold; color:  white;" />
                            <p:inputText value="#{man_clientes.doc_nit}" size="20" maxlength="20" />
                            <p:inputText value="#{man_clientes.det_gir}" size="40" maxlength="100" />
                            <p:inputText value="#{man_clientes.per_con}" size="40" maxlength="150" />
                            <h:outputText value="Número Registro" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Gran Contribuyente" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Exento" style="font-weight:bold; color:  white;" />
                            <p:inputText value="#{man_clientes.num_reg}" size="20" maxlength="50" />
                            <p:selectBooleanButton value="#{man_clientes.flg_gra_con}" offLabel="No" onLabel="Sí" offIcon="fa fa-times-circle-o" onIcon="fa fa-check-circle-o" />
                            <p:selectBooleanButton value="#{man_clientes.flg_exe}" offLabel="No" onLabel="Sí" offIcon="fa fa-times-circle-o" onIcon="fa fa-check-circle-o" />

                        </h:panelGrid>
                    </div>
                </p:panel>

            </h:form>
        </p:dialog>  

        <p:dialog  id="dlgClientesTransac" widgetVar="wClientesTransac" modal="true" 
                   width="800" height="450" closable="false" resizable="false" 
                   header="Historial del Cliente" rendered="true" 
                   dynamic="false" visible="false" style=" background-color: #deedf7;"
                   >

            <h:form id="frmClientesTransac"> 
                <p:growl id="msgClientesTransac" showDetail="true" life="8000"/>
                <p:toolbar >
                    <f:facet name="left">
                        <h:outputText value="&nbsp;&nbsp;#{man_clientes.nombrecliente}" style="font-weight:bold; color:  #435055;" />
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wClientesTransac').hide()"
                                         update=":frmClientesTransac, :frmClientesMain"
                                         icon="fa fa-times"
                                         actionListener="#{man_clientes.cerrarventanaHistoria()}"
                                         />
                    </f:facet>

                </p:toolbar>

                <div style=" background-color: #435055;">
                    <h:panelGrid columns="5" cellpadding="5">
                        <h:outputText value="Fecha y Hora" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Cantidad" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Item" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Existencia" style="font-weight:bold; color:  white;" />
                        <p:calendar  pattern="dd/MM/yyyy HH:mm" locale="es" 
                                     readonlyInput="true" 
                                     showOn="button" 
                                     size="16"
                                     navigator="true"
                                     value ="#{man_clientes.dfechahistoria}"
                                     >
                            <p:ajax event="dateSelect" listener="#{man_clientes.dateSelectedHistoria}" />
                        </p:calendar>
                        <p:inputNumber value ="#{man_clientes.det_can}" minValue="0" decimalPlaces="2" size="10" />
                        <p:selectBooleanButton value="#{man_clientes.flagservicioproducto}" 
                                               offLabel="Servicio" onLabel="Producto" 
                                               offIcon="fa fa-scissors" onIcon="fa fa-flask" 
                                               >
                            <p:ajax listener="#{man_clientes.llenarProductoServicio()}" update="somproserclitra, lblexishiscli"/> 
                        </p:selectBooleanButton>
                        <p:selectOneMenu style="width:330px;text-align:right;"
                                         immediate="false"
                                         value ="#{man_clientes.cod_pro}" 
                                         id="somproserclitra"
                                         filter="true"
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         >  
                            <p:ajax event="change" listener="#{man_clientes.onselectProducto()}" update="lblexishiscli"/>
                            <f:selectItem itemLabel="Ninguno" itemValue="0" /> 
                            <f:selectItems value="#{man_clientes.items}" var="clitraitems"
                                           itemLabel="#{clitraitems.descripcion}" itemValue="#{clitraitems.codigo}"/>

                        </p:selectOneMenu>
                        <p:inputText id="lblexishiscli" value="#{man_clientes.existencia}" 
                                     size="6" disabled="true" 
                                     style="font-weight:bold; text-align: center; color: blue; "/>

                    </h:panelGrid>
                    <h:panelGrid columns="3" cellpadding="5">
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Fecha Recordatorio" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Nota Recordatorio" style="font-weight:bold; color:  white;" />
                        <p:selectBooleanButton value="#{man_clientes.boolnotrec}" 
                                               offLabel="Sin Recordatorio" onLabel="Con Recordatorio" 
                                               offIcon="fa fa-lock" onIcon="fa fa-unlock" 
                                               >
                            <p:ajax listener="#{man_clientes.onclickNotaRecordatorio()}" update="calfecrechiscli, imptxtobshiscli"/> 
                        </p:selectBooleanButton>
                        <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                     readonlyInput="true" 
                                     showOn="button" 
                                     size="16"
                                     navigator="true"
                                     value ="#{man_clientes.dfecharecordatorio}"
                                     id="calfecrechiscli"
                                     disabled="#{man_clientes.boolenable}"
                                     >
                            <p:ajax event="dateSelect" listener="#{man_clientes.dateSelectedRecordatorio}" />
                        </p:calendar>
                        <p:inputTextarea value="#{man_clientes.not_rec}" 
                                         rows="2" cols="70" maxlength="200" 
                                         id="imptxtobshiscli"
                                         disabled="#{man_clientes.boolenable}"
                                         />
                    </h:panelGrid>
                    <h:panelGrid columns="3" cellpadding="5">    
                        <h:outputText value="Observaciones" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <p:inputTextarea value="#{man_clientes.det_obs}" rows="2" cols="100" maxlength="350"/>
                        <p:commandButton title="Agregar" styleClass="BotonAgregar"
                                         update=":frmClientesTransac"
                                         icon="fa fa-plus"
                                         actionListener="#{man_clientes.agregarItem()}"
                                         />
                        <p:commandButton title="Remover" styleClass="BotonRemover"
                                         update=":frmClientesTransac"
                                         icon="fa fa-minus"
                                         actionListener="#{man_clientes.eliminarItem()}"
                                         />
                    </h:panelGrid>
                </div>
                <p:dataTable id="dtHistoriaCli" var="vHistoriaCli" 
                             value="#{man_clientes.historia}" 
                             emptyMessage="No se encontraron resultados" 
                             selectionMode="single" selection="#{man_clientes.cattraclientes}" 
                             rowKey="#{vHistoriaCli.cor_tra}"
                             editable="false" 
                             style="width:778px"
                             scrollable="true"
                             scrollHeight="150"
                             >
                    <p:ajax event="rowSelect" listener="#{man_clientes.onRowSelectHistoria}" 
                            update=":frmClientesTransac" />

                    <p:column style="width:55px" headerText="Fecha y Hora">
                        <h:outputText value="#{vHistoriaCli.fec_tra}" />
                    </p:column>
                    <p:column style="width:20px" headerText="Cantidad">
                        <h:outputText value="#{vHistoriaCli.det_can}" />
                    </p:column>
                    <p:column style="width:220px" headerText="Item">
                        <h:outputText value="#{vHistoriaCli.nombreitem}" />
                    </p:column>
                    <p:column style="width:40px" headerText="Facturado">
                        <h:outputText value="#{vHistoriaCli.flg_fac}" />
                    </p:column>
                </p:dataTable>


            </h:form>
        </p:dialog> 

        <p:dialog  id="dlgObservacionesCli" widgetVar="wObservacionesCli" modal="true" 
                   width="400" height="250" closable="true" resizable="false" 
                   header="Notas y Observaciones" rendered="true" 
                   dynamic="false" visible="false"
                   >
            <h:form id="frmObservacionesCli" > 
                <div style=" background-color: #435055;" align="center">
                    <h:panelGrid columns="1" cellpadding="5">
                        <h:outputText value="Observaciones" style="font-weight:bold; color:  white;" />
                        <p:inputTextarea value="#{man_clientes.hisobservaciones}" rows="4" cols="50" readonly="true"/>
                        <h:outputText value="Fecha Recordatorio" style="font-weight:bold; color:  white;" />
                        <p:inputText value="#{man_clientes.hisfecrec}" size="11" readonly="true"/>
                        <h:outputText value="Nota Recordatorio" style="font-weight:bold; color:  white;" />
                        <p:inputTextarea value="#{man_clientes.hisnotrec}" rows="3" cols="50" readonly="true"/>
                    </h:panelGrid>
                </div>
            </h:form>
        </p:dialog>


        <!-- *******************************************************************
        ************************** CONTROL FACTURACIÓN *************************
        *********************************************************************-->

        <p:dialog  id="dlgFacturacion" widgetVar="wFacturacion" modal="true" 
                   width="1050" height="450" closable="false" resizable="false" 
                   header="Facturación" rendered="true" 
                   dynamic="false" visible="false" style=" background: #deedf7;"
                   >

            <h:form id="frmFacturacion"> 
                <p:growl id="msgFacturacion" showDetail="true" life="8000"/>
                <p:toolbar >

                    <f:facet name="left">
                        <p:commandButton value="Prefactura" styleClass="BotonHistoria"
                                         onclick="PF('wFacturacion').hide()"
                                         update=":frmFacturacion"
                                         icon="fa fa-group"
                                         actionListener="#{man_clientes.cerrarventanaHistoria()}"
                                         />
                        <p:commandButton value="Facturar" styleClass="BotonEliminar"
                                         update=":frmFacturacion"
                                         icon="fa fa-usd"
                                         actionListener="#{man_Facturacion.iniciarpago()}"
                                         />
                    </f:facet>

                    <f:facet name="right">
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wFacturacion').hide()"
                                         update=":frmFacturacion"
                                         icon="fa fa-times"
                                         actionListener="#{man_Facturacion.cerrarventana()}"
                                         />
                    </f:facet>

                </p:toolbar>

                <div style=" background-color: #435055;">
                    <h:panelGrid columns="7" cellpadding="2">
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Item" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Unidad Medida Original" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Lote" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Existencia" style="font-weight:bold; color:  white;" />

                        <p:selectBooleanButton value="#{man_Facturacion.det_flg_pro_ser}" 
                                               offLabel="Servicio" onLabel="Producto" 
                                               offIcon="fa fa-scissors" onIcon="fa fa-flask" 
                                               style="width: 75px;"
                                               >
                            <p:ajax listener="#{man_Facturacion.llenarItems()}" update =":frmFacturacion" /> 
                        </p:selectBooleanButton>
                        <p:inputText value="#{man_Facturacion.codrefbus}" 
                                     size="12"  
                                     style="font-weight:bold;color: blue; "
                                     autocomplete="off"
                                     />
                        <p:commandButton style=" width: 35px;" value="ir" actionListener="#{man_Facturacion.onInsertText()}" update=":frmFacturacion" />
                        <p:selectOneMenu style="width:440px;text-align:right;"
                                         immediate="false"
                                         value ="#{man_Facturacion.pf_cod_ser}" 
                                         filter="true"
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         >  
                            <p:ajax event="change" listener="#{man_Facturacion.onSelectItem()}" update=":frmFacturacion" />
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="0" /> 
                            <f:selectItems value="#{man_Facturacion.items}" var="itemsfacfac"
                                           itemLabel="#{itemsfacfac.descripcion}" itemValue="#{itemsfacfac.codigo}"/>

                        </p:selectOneMenu>
                        <p:inputText value="#{man_Facturacion.unimedori}" 
                                     size="19" disabled="true" 
                                     style="font-weight:bold; text-align: center; color: blue; "/>
                        <p:selectOneMenu style="width:90px;text-align:right;"
                                         immediate="false"
                                         value ="#{man_Facturacion.pf_lote}" 
                                         filter="true"
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         >  
                            <p:ajax event="change" listener="#{man_Facturacion.onSelectItem()}" update=":frmFacturacion" />
                            <f:selectItem itemLabel="Sin Lote" itemValue="" /> 
                            <f:selectItems value="#{man_Facturacion.lotes}" var="lotefacfac"
                                           itemLabel="#{lotefacfac.descripcion}" itemValue="#{lotefacfac.codigo}"/>

                        </p:selectOneMenu>
                        <p:inputNumber value ="#{man_Facturacion.existencia}" minValue="0" decimalPlaces="2" size="10" readonly="true" />
                    </h:panelGrid>        
                    <h:panelGrid columns="6" cellpadding="5">
                        <h:outputText value="Cantidad" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Unidad Medida Venta" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Precio Venta Unitario" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Descuento ( % )" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />

                        <p:inputNumber value ="#{man_Facturacion.pf_det_can_con}" minValue="0" decimalPlaces="2" size="10" />
                        <p:selectOneMenu style="width:180px;text-align:right;"
                                         immediate="false"
                                         value ="#{man_Facturacion.pf_cod_uni_med}" 
                                         filter="true"
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         >  
                            <f:selectItem itemLabel="Seleccione Una" itemValue="0" /> 
                            <f:selectItems value="#{man_Facturacion.unidadmedida}" var="unimedfacfac"
                                           itemLabel="#{unimedfacfac.descripcion}" itemValue="#{unimedfacfac.codigo}"/>

                        </p:selectOneMenu>
                        <p:inputNumber value ="#{man_Facturacion.pf_pre_con_iva}" minValue="0" decimalPlaces="2" size="15" />
                        <p:inputNumber value ="#{man_Facturacion.pf_por_des}" minValue="0" decimalPlaces="2" size="15" />
                        <p:commandButton title="Agregar" styleClass="BotonAgregar"
                                         update=":frmFacturacion"
                                         icon="fa fa-plus"
                                         actionListener="#{man_Facturacion.agregarItem()}"
                                         />
                        <p:commandButton title="Remover" styleClass="BotonRemover"
                                         update=":frmFacturacion"
                                         icon="fa fa-minus"
                                         actionListener="#{man_Facturacion.eliminarItem()}"
                                         />
                    </h:panelGrid>
                </div>
                <p:dataTable id="dtFacturacion" var="vFacturacion" 
                             value="#{man_Facturacion.prefactura}" 
                             emptyMessage="No se encontraron resultados" 
                             selectionMode="single" selection="#{man_Facturacion.catprefactura}" 
                             rowKey="#{vFacturacion.cor_pre_fac}"
                             editable="false" 
                             style="width:1030px"
                             scrollable="true"
                             scrollHeight="205"
                             >
                    <p:ajax event="rowSelect" listener="#{man_Facturacion.onRowSelectPrefactura}" 
                            update=":frmFacturacion" />

                    <p:column style="width:5px" headerText="N°">
                        <h:outputText value="#{vFacturacion.cor_pre_fac}" />
                    </p:column>
                    <p:column style="width:20px" headerText="Cantidad">
                        <h:outputText value="#{vFacturacion.det_can_con}" />
                    </p:column>
                    <p:column style="width:60px" headerText="Uni.Med">
                        <h:outputText value="#{vFacturacion.nomunimed}" />
                    </p:column>
                    <p:column style="width:190px" headerText="Item">
                        <h:outputText value="#{vFacturacion.nomitem}" />
                    </p:column>
                    <p:column style="width:40px" headerText="Pre.Unitario">
                        <h:outputText value="#{vFacturacion.pre_con_iva}" />
                    </p:column>
                    <p:column style="width:40px" headerText="Descuento">
                        <h:outputText value="#{vFacturacion.por_des}" />
                    </p:column>
                    <p:column style="width:50px" headerText="Total">
                        <h:outputText value="#{vFacturacion.total}" />
                    </p:column>
                </p:dataTable>

                <div align="right" style=" background-color: #435055;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="SUMA TOTAL" style="font-weight:bold; color:  white;" />
                        <p:inputNumber value ="#{man_Facturacion.det_sumatotal}" minValue="0" decimalPlaces="2" size="15" readonly="true" />
                    </h:panelGrid>
                </div>


            </h:form>
        </p:dialog> 

        <!-- *******************************************************************
        ************************** CONTROL PAGO VENTA ***************************
        *********************************************************************-->

        <p:dialog  id="dlgPagoFac" widgetVar="wPagoFac" modal="true" 
                   width="1000" height="410" closable="false" resizable="false" 
                   header="Pago" rendered="true" 
                   dynamic="false" visible="false" style=" background: #deedf7;"
                   >

            <h:form id="frmPagoFac"> 
                <p:growl id="msgPagoFac" showDetail="true" life="8000"/>
                <p:toolbar >

                    <f:facet name="left">
                        <p:commandButton value="Pagar" styleClass="BotonEliminar"
                                         update=":frmPagoFac"
                                         icon="fa fa-usd"
                                         actionListener="#{man_Facturacion.facturar()}"
                                         />
                        
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Cancelar" styleClass="BotonCerrar"
                                         onclick="PF('wPagoFac').hide()"
                                         update=":frmFacturacion"
                                         icon="fa fa-times"
                                         actionListener="#{man_Facturacion.cerrarpago()}"
                                         />
                        
                    </f:facet>



                </p:toolbar>

                <div style=" background-color: #435055;">
                    <h:panelGrid columns="6" cellpadding="3">
                        <h:outputText value="Cliente" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Caja" style="font-weight:bold; color:  white;" />
                        <h:outputText value="Tipo Documento" style="font-weight:bold; color:  white;" />
                        <h:outputText value="N° Documento" style="font-weight:bold; color:  white;" />


                        <p:selectOneMenu style="width:380px;text-align:right;"
                                         immediate="false"
                                         value ="#{man_Facturacion.pag_cod_cli}" 
                                         filter="true"
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         id="somclipagven"
                                         >  
                            <f:selectItem itemLabel="Ninguno" itemValue="0" /> 
                            <f:selectItems value="#{man_Facturacion.clientes}" var="clipagven"
                                           itemLabel="#{clipagven.descripcion}" itemValue="#{clipagven.codigo}"/>

                        </p:selectOneMenu>
                        <p:commandButton title="Refrescar" 
                                         styleClass="BotonRefreshMini"
                                         actionListener="#{man_Facturacion.llenarClientes()}"
                                         update="somclipagven"
                                         icon="fa fa-refresh"
                                         />
                        <p:commandButton title="Clientes" styleClass="BotonMenuMini"
                                         onclick="PF('wClientesMain').show()"
                                         actionListener="#{man_clientes.iniciarventana()}"
                                         update=":frmClientesMain"
                                         icon="fa fa-bars"
                                         />
                        <p:selectOneMenu style="width:100px;text-align:right;"
                                         immediate="false"
                                         value ="#{man_Facturacion.pag_cod_caj}" 
                                         filter="true"
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         >  
                            <p:ajax event="change" listener="#{man_Facturacion.onSelectCaja()}" update="somtipdocpagven,txtnumdocpagven" />
                            <f:selectItem itemLabel="Ninguno" itemValue="0" /> 
                            <f:selectItems value="#{man_Facturacion.cajas}" var="cajpagven"
                                           itemLabel="#{cajpagven.descripcion}" itemValue="#{cajpagven.codigo}"/>

                        </p:selectOneMenu>
                        <p:selectOneMenu style="width:180px;text-align:right;"
                                         immediate="false"
                                         value ="#{man_Facturacion.pag_cod_tip_doc}" 
                                         filter="true"
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         id="somtipdocpagven"
                                         >  
                            <p:ajax event="change" listener="#{man_Facturacion.onSelectDocumento()}" update="txtnumdocpagven" />
                            <f:selectItem itemLabel="Ninguno" itemValue="0" /> 
                            <f:selectItems value="#{man_Facturacion.tiposdoc}" var="tipdocpagven"
                                           itemLabel="#{tipdocpagven.descripcion}" itemValue="#{tipdocpagven.codigo}"/>

                        </p:selectOneMenu>
                        <p:inputText value="#{man_Facturacion.pag_num_doc}" 
                                     id="txtnumdocpagven"
                                     size="20" readonly="true" 
                                     style="font-weight:bold; color: blue; "/>

                    </h:panelGrid>
                    <div align="center" class="noBorders">
                        <h:panelGrid columns="3" cellpadding="5">
                            <h:outputText value="Sub Total" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Descuento Adicional ( % )" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Total" style="font-weight:bold; color:  white;" />
                            <p:inputNumber value ="#{man_Facturacion.det_sumatotal}" minValue="0" decimalPlaces="2" size="20" readonly="true"/>
                            <p:inputNumber value ="#{man_Facturacion.pag_por_des}" minValue="0" decimalPlaces="2" size="20">
                                <p:ajax event="change" listener="#{man_Facturacion.onInsertDescuento()}" update=":frmPagoFac" />
                            </p:inputNumber>
                            <p:inputNumber value ="#{man_Facturacion.pag_pag_tot}" minValue="0" decimalPlaces="2" size="20" />
                        </h:panelGrid>
                        <h:panelGrid columns="3" cellpadding="5">
                            <h:outputText value="Fecha" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Condición Pago" style="font-weight:bold; color:  white;" />
                            <h:outputText value="Tipo de Pago" style="font-weight:bold; color:  white;" />
                            <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                         readonlyInput="true" 
                                         showOn="button" 
                                         size="12"
                                         navigator="true"
                                         value ="#{man_Facturacion.mfechapag}"
                                         >
                                <p:ajax event="dateSelect" listener="#{man_Facturacion.dateSelectedFecPag}" />
                            </p:calendar>
                            <p:selectBooleanButton value="#{man_Facturacion.pag_con_pag}" 
                                                   offLabel="Contado" onLabel="Crédito" 
                                                   offIcon="fa fa-usd" onIcon="fa fa-clock-o" 
                                                   style="width: 80px;"
                                                   >
                                <p:ajax listener="#{man_Facturacion.onClickCondicionPago()}" update=":frmPagoFac"/> 
                            </p:selectBooleanButton>
                            <p:selectOneMenu style="width:200px;text-align:right;"
                                             immediate="false"
                                             value ="#{man_Facturacion.pag_tip_pag}" 
                                             filter="true"
                                             filterMatchMode="contains"
                                             autoWidth="false"
                                             id="somtippagpagven"
                                             >  
                                <p:ajax event="change" listener="#{man_Facturacion.onSelectTipoPago()}" update=":frmPagoFac" />
                                <f:selectItem itemLabel="Ninguno" itemValue="0" /> 
                                <f:selectItems value="#{man_Facturacion.tipospag}" var="tippagpagven"
                                               itemLabel="#{tippagpagven.descripcion}" itemValue="#{tippagpagven.codigo}"/>

                            </p:selectOneMenu>
                        </h:panelGrid>
                        <h:panelGrid columns="3" cellpadding="3">
                            <p:panel header="Efectivo" style="width: 280px; background: #cc66ff;" >
                                <h:panelGrid columns="1" cellpadding="1">
                                    <h:outputText value="Total" style="font-weight:bold; color:  white;" />
                                    <p:inputNumber value ="#{man_Facturacion.pag_efe_tot}" minValue="0" decimalPlaces="2" size="30" disabled="#{man_Facturacion.boo_mix}" />
                                    <h:outputText value="Paga con" style="font-weight:bold; color:  white;" />
                                    <p:inputNumber value ="#{man_Facturacion.pag_efe_pag_con}" minValue="0" decimalPlaces="2" size="30" disabled="#{man_Facturacion.boo_efe}">
                                        <p:ajax event="change" listener="#{man_Facturacion.onInsertPagaCon()}" update="incampagven" />
                                    </p:inputNumber>
                                    <h:outputText value="Cambio" style="font-weight:bold; color:  white;" />
                                    <p:inputNumber id="incampagven" value ="#{man_Facturacion.pag_efe_cam}" minValue="0" decimalPlaces="2" size="30" readonly="true" disabled="#{man_Facturacion.boo_efe}"/>
                                </h:panelGrid>   
                            </p:panel>
                            <p:panel header="Tarjeta" style="width: 280px; background: #f88bf8;">
                                <h:panelGrid columns="1" cellpadding="1">
                                    <h:outputText value="Total" style="font-weight:bold; color:  white;" />
                                    <p:inputNumber value ="#{man_Facturacion.pag_tar_tot}" minValue="0" decimalPlaces="2" size="30" disabled="#{man_Facturacion.boo_mix}"/>
                                    <h:outputText value="Tipo" style="font-weight:bold; color:  white;" />
                                    <p:selectOneMenu style="width:180px;text-align:right;"
                                                     immediate="false"
                                                     value ="#{man_Facturacion.pag_tar_tip}" 
                                                     filter="true"
                                                     filterMatchMode="contains"
                                                     autoWidth="false"
                                                     disabled="#{man_Facturacion.boo_tar}"
                                                     >  
                                        <f:selectItem itemLabel="Ninguno" itemValue="0" /> 
                                        <f:selectItems value="#{man_Facturacion.tipostar}" var="tiptarpagven"
                                                       itemLabel="#{tiptarpagven.descripcion}" itemValue="#{tiptarpagven.codigo}"/>

                                    </p:selectOneMenu>
                                    <h:outputText value="Número" style="font-weight:bold; color:  white;" />
                                    <p:inputText value="#{man_Facturacion.pag_tar_num}" 
                                                 size="30" disabled="#{man_Facturacion.boo_tar}"
                                                 style="font-weight:bold; color: blue; "/>
                                </h:panelGrid>   
                            </p:panel>
                            <p:panel header="Cheque" style="width: 280px; background: #9999ff;">
                                <h:panelGrid columns="1" cellpadding="1">
                                    <h:outputText value="Total" style="font-weight:bold; color:  white;" />
                                    <p:inputNumber value ="#{man_Facturacion.pag_che_tot}" minValue="0" decimalPlaces="2" size="30" disabled="#{man_Facturacion.boo_mix}"/>
                                    <h:outputText value="Banco" style="font-weight:bold; color:  white;" />
                                    <p:selectOneMenu style="width:180px;text-align:right;"
                                                     immediate="false"
                                                     value ="#{man_Facturacion.pag_che_ban}" 
                                                     filter="true"
                                                     filterMatchMode="contains"
                                                     autoWidth="false"
                                                     disabled="#{man_Facturacion.boo_che}"
                                                     >  
                                        <f:selectItem itemLabel="Ninguno" itemValue="0" /> 
                                        <f:selectItems value="#{man_Facturacion.bancos}" var="banpagven"
                                                       itemLabel="#{banpagven.descripcion}" itemValue="#{banpagven.codigo}"/>

                                    </p:selectOneMenu>
                                    <h:outputText value="Número" style="font-weight:bold; color:  white;" />
                                    <p:inputText value="#{man_Facturacion.pag_che_num}" 
                                                 size="30" disabled="#{man_Facturacion.boo_che}"
                                                 style="font-weight:bold; color: blue; "/>
                                </h:panelGrid>   
                            </p:panel>
                        </h:panelGrid>
                    </div>


                </div>

            </h:form>
        </p:dialog>


        

        <!-- **************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************    GENERALES     *********************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************************************************************************************************************-->

        <!-- *******************************************************************
        **************** Pantalla mantenimiento de usuarios ********************
        *********************************************************************-->

        <p:dialog  id="dlgUsuarios" widgetVar="wUsuarios" modal="true" 
                   width="500" height="470" closable="false" resizable="false" 
                   header="Mantenimiento Usuarios" rendered="true" 
                   dynamic="true" visible="false" 
                   >

            <h:form id="frmUsuarios"> 
                <p:growl id="msgUsuarios" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manUsuarios.nuevo()}"
                                         update=":frmUsuarios"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         action="#{manUsuarios.guardar()}"
                                         update=":frmUsuarios"
                                         icon="ui-icon-disk"
                                         />
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manUsuarios.eliminar()}"
                                         update=":frmUsuarios"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wUsuarios').hide()"
                                         action="#{manUsuarios.cerrarventana()}" 
                                         update=":frmUsuarios"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>
                <div style=" background-color: #ebf8fe;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="Usuario" style="font-weight:bold;" />
                        <p:inputText maxlength="15" size="17" value="#{manUsuarios.nom_usu}" 
                                     onfocus="this.select()"/>
                        <h:outputText value="Contraseña" style="font-weight:bold;" />
                        <p:password maxlength="15" size="17" value="#{manUsuarios.des_pas}" 
                                    onfocus="this.select()"/>
                        <h:outputText value="Tipo Usuario" style="font-weight:bold;" />
                        <p:selectOneMenu value="#{manUsuarios.tip_usu}" style=" width: 150px;">
                            <f:selectItem itemLabel="Usuario" itemValue="0"/>
                            <f:selectItem itemLabel="Usuario Avanzado" itemValue="6"/>
                            <f:selectItem itemLabel="Administrador" itemValue="7"/>
                        </p:selectOneMenu>
                        <h:outputText value="Nombre" style="font-weight:bold;" />
                        <p:inputText maxlength="125" size="45" value="#{manUsuarios.det_nom}" 
                                     onfocus="this.select()"/>
                        <h:outputText value="Correo" style="font-weight:bold;" />
                        <p:inputText maxlength="50" size="45" value="#{manUsuarios.det_mai}" 
                                     onfocus="this.select()"/>
                        <h:outputText value="Departamento" style="font-weight:bold;" />
                        <p:selectOneMenu value="#{manUsuarios.cod_dep}" style=" width: 150px;">
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{manUsuarios.departamentos}" var="mdepusu"
                                           itemLabel="#{mdepusu.nom_dep}" itemValue="#{mdepusu.cod_dep}"/> 
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <p:dataTable id="dtUsuarios" var="vUsu" 
                                 value="#{manUsuarios.usuarios}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manUsuarios.catusuarios}" 
                                 rowKey="#{vUsu.cod_usu}"
                                 editable="false" 
                                 style="width:475px"
                                 scrollable="true"
                                 scrollHeight="115"
                                 >
                        <p:ajax event="rowSelect" listener="#{manUsuarios.onRowSelect}" 
                                update=":frmUsuarios" />

                        <p:column style="width:50px" headerText="Usuario">
                            <h:outputText value="#{vUsu.nom_usu}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Departamento">
                            <h:outputText value="#{vUsu.nomdep}" />
                        </p:column>
                        <p:column style="width:200px" headerText="Nombre">
                            <h:outputText value="#{vUsu.det_nom}" />
                        </p:column>
                    </p:dataTable>
                </div>

            </h:form>
        </p:dialog>  

        <!-- *******************************************************************
        **************** Pantalla mantenimiento de Paises ********************
        *********************************************************************-->

        <p:dialog  id="dlgPaises" widgetVar="wPaises" modal="true" 
                   width="500" height="300" closable="false" resizable="false" 
                   header="Países" rendered="true" 
                   dynamic="true" visible="false" 
                   >

            <h:form id="frmPaises"> 
                <p:growl id="msgPaises" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manPaises.nuevo()}"
                                         update=":frmPaises"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         action="#{manPaises.guardar()}"
                                         update=":frmPaises"
                                         icon="ui-icon-disk"
                                         />
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manPaises.eliminar()}"
                                         update=":frmPaises"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wPaises').hide()"
                                         action="#{manPaises.cerrarventana()}" 
                                         update=":frmPaises"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>
                <div style=" background-color: #ebf8fe;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="Nombre" style="font-weight:bold;" />
                        <p:inputText maxlength="20" size="60" value="#{manPaises.nom_pai}" 
                                     onfocus="this.select()"/>
                    </h:panelGrid>
                    <p:dataTable id="dtPaises" var="vPai" 
                                 value="#{manPaises.paises}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manPaises.catpaises}" 
                                 rowKey="#{vPai.cod_pai}"
                                 editable="false" 
                                 style="width:475px"
                                 scrollable="true"
                                 scrollHeight="190"
                                 >
                        <p:ajax event="rowSelect" listener="#{manPaises.onRowSelect}" 
                                update=":frmPaises" />

                        <p:column style="width:50px" headerText="Nombre Bodega">
                            <h:outputText value="#{vPai.nom_pai}" />
                        </p:column>
                    </p:dataTable>
                </div>

            </h:form>
        </p:dialog>  

        <!-- *******************************************************************
        ************** Pantalla mantenimiento de Departamentos *****************
        *********************************************************************-->

        <p:dialog  id="dlgDepartamentos" widgetVar="wDepartamentos" modal="true" 
                   width="440" height="320" closable="false" resizable="false" 
                   header="Mantenimiento Departamentos" rendered="true" 
                   dynamic="true" visible="false" 
                   >

            <h:form id="frmDepartamentos"> 
                <p:growl id="msgDepartamentos" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manDepartamentos.nuevo()}"
                                         update=":frmDepartamentos"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         action="#{manDepartamentos.guardar()}"
                                         update=":frmDepartamentos"
                                         icon="ui-icon-disk"
                                         />

                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manDepartamentos.eliminar()}"
                                         update=":frmDepartamentos"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wDepartamentos').hide()"
                                         action="#{manDepartamentos.cerrarventana()}" 
                                         update=":frmDepartamentos"
                                         icon="ui-icon-close"
                                         />


                    </f:facet>
                </p:toolbar>
                <div style=" background-color: #ebf8fe;">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="Nombre" style="font-weight:bold;" />
                        <p:inputText maxlength="20" size="45" value="#{manDepartamentos.nom_dep}" 
                                     onfocus="this.select()"/>
                    </h:panelGrid>
                    <p:dataTable id="dtDepartamentos" var="vDep" 
                                 value="#{manDepartamentos.departamentos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manDepartamentos.catdepartamentos}" 
                                 rowKey="#{vDep.cod_dep}"
                                 editable="false" 
                                 style="width:415px"
                                 scrollable="true"
                                 scrollHeight="200"
                                 >
                        <p:ajax event="rowSelect" listener="#{manDepartamentos.onRowSelect}" 
                                update=":frmDepartamentos" />

                        <p:column style="width:50px" headerText="Departamento">
                            <h:outputText value="#{vDep.nom_dep}" />
                        </p:column>

                    </p:dataTable>
                </div>

            </h:form>
        </p:dialog>  

        <!--******************************************************************** 
        **************** Pantalla mantenimiento de Marcas **********************
        *********************************************************************-->

        <p:dialog  id="dlgMarca" widgetVar="wMarca" modal="true" 
                   width="460" height="290" closable="false" resizable="false" 
                   header="Mantenimiento de Marca" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmMarca"> 
                <p:growl id="msgMarca" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manMarcas.nuevo()}"
                                         update=":frmMarca"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manMarcas.guardar()}"
                                         update=":frmMarca"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manMarcas.eliminar()}"
                                         update=":frmMarca"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wMarca').hide()"
                                         actionListener="#{manMarcas.cerrarventana()}"
                                         update=":frmMarca"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #ebf8fe;">
                        <p:focus for="txtnombremarca" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombremarca" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manMarcas.nom_mar}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtMarca" var="vMarca" 
                                 value="#{manMarcas.marcas}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manMarcas.catmarcas}" 
                                 rowKey="#{vMarca.id_mar}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:400px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manMarcas.onRowSelect}" 
                                update=":frmMarca"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vMarca.id_mar}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Nombre">
                            <h:outputText value="#{vMarca.nom_mar}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        

        <!-- **************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************    INVENTARIO    *********************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************************************************************************************************************-->


        <!--******************************************************************** 
        ********* Pantalla mantenimiento de Sucursales y Bodegas ***************
        *********************************************************************-->

        <p:dialog  id="dlgSucBod" widgetVar="wSucBod" modal="true" 
                   width="900" height="520" closable="false" resizable="false" 
                   header="Sucursales y  Bodegas" rendered="true" 
                   dynamic="false" visible="false" style=" background-color: #deedf7;"
                   >

            <h:form id="frmSucBod"> 
                <p:growl id="msgSucBod" showDetail="true" life="8500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" styleClass="BotonNuevo"
                                         actionListener="#{man_sucursalesbodegas.nuevaSucursal()}"
                                         update=":frmSucBod"
                                         icon="fa fa-file-o"
                                         />
                        <p:commandButton value="Editar" styleClass="BotonEditar"
                                         actionListener="#{man_sucursalesbodegas.iniciarventanaEdit()}"
                                         icon="fa fa-pencil"
                                         />
                        <p:commandButton value="Guardar" styleClass="BotonGuardar"
                                         actionListener="#{man_sucursalesbodegas.guardarsucursal()}"
                                         update=":frmSucBod"
                                         icon="fa fa-floppy-o"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="fa fa-exclamation-triangle"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" styleClass="BotonEliminar"
                                         actionListener="#{man_sucursalesbodegas.eliminarsucursal()}"
                                         update=":frmSucBod"
                                         icon="fa fa-trash-o"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="fa fa-exclamation-triangle"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wSucBod').hide()"
                                         actionListener="#{man_sucursalesbodegas.cerrarventana()}"
                                         update=":frmSucBod"
                                         icon="fa fa-times"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #435055;">
                        <h:panelGrid columns="3" cellpadding="5">
                            <h:outputText value="Empresa" style="font-weight:bold;"/>
                            <h:outputText value="Estado" style="font-weight:bold;"/>
                            <h:outputText value="Nombre Sucursal" style="font-weight:bold;"/>
                            <p:selectOneMenu value="#{man_sucursalesbodegas.suc_cod_emp}" 
                                             style="width:250px;text-align:right;"
                                             autoWidth="false"
                                             filter="true"
                                             filterMatchMode="contains"
                                             >  
                                <p:ajax event="change" listener="#{man_sucursalesbodegas.nuevaSucursal()}" update=":frmSucBod"/>
                                <f:selectItem itemLabel="Seleccione una" itemValue="0" /> 
                                <f:selectItems value="#{man_sucursalesbodegas.empresas}" var="vempsucbod"
                                               itemLabel="#{vempsucbod.descripcion}" itemValue="#{vempsucbod.codigo}"/>

                            </p:selectOneMenu>
                            <p:selectOneMenu value="#{man_sucursalesbodegas.suc_cod_est}" 
                                             style="width:200px;text-align:right;"
                                             autoWidth="false"
                                             filter="true"
                                             filterMatchMode="contains"
                                             >  
                                <f:selectItem itemLabel="Seleccione uno" itemValue="0" /> 
                                <f:selectItems value="#{man_sucursalesbodegas.estados}" var="succodest"
                                               itemLabel="#{succodest.descripcion}" itemValue="#{succodest.codigo}"/>
                            </p:selectOneMenu>
                            <p:inputText value="#{man_sucursalesbodegas.suc_nom_suc}" size="47" maxlength="200" onfocus="this.select()"/>
                            <h:outputText value="Encargado" style="font-weight:bold;"/>
                            <h:outputText value="Teléfono 1" style="font-weight:bold;"/>
                            <h:outputText value="Teléfono 2" style="font-weight:bold;"/>
                            <p:selectOneMenu value="#{man_sucursalesbodegas.suc_cod_per_res}" 
                                             style="width:250px;text-align:right;"
                                             autoWidth="false"
                                             filter="true"
                                             filterMatchMode="contains"
                                             >  
                                <f:selectItem itemLabel="Seleccione uno" itemValue="0" /> 
                                <f:selectItems value="#{man_sucursalesbodegas.personal}" var="succodperses"
                                               itemLabel="#{succodperses.descripcion}" itemValue="#{succodperses.codigo}"/>
                            </p:selectOneMenu>
                            <p:inputText size="20" maxlength="25" value="#{man_sucursalesbodegas.suc_det_tel}" onfocus="this.select()" />
                            <p:inputText size="20" maxlength="25" value="#{man_sucursalesbodegas.suc_det_tel_2}" onfocus="this.select()" />
                        </h:panelGrid>  
                        <h:panelGrid columns="1" cellpadding="5">
                            <h:outputText value="Dirección" style="font-weight:bold;"/>
                            <p:inputTextarea value="#{man_sucursalesbodegas.suc_det_dir}" maxlength="150" rows="2" cols="125" onfocus="this.select()" />
                        </h:panelGrid> 
                    </div>
                </p:panel>
                <p:panel>
                    <div style=" background-color: #435055;">
                        <h:panelGrid columns="3" cellpadding="5">
                            <h:outputText value="Nombre Bodega" style="font-weight:bold;"/>
                            <h:outputText value="" style="font-weight:bold;"/>
                            <h:outputText value="" style="font-weight:bold;"/>
                            <p:inputText size="116" maxlength="150" value="#{man_sucursalesbodegas.bod_nom_bod}" onfocus="this.select()" />
                            <p:commandButton title="Agregar" styleClass="BotonAgregar"
                                             update=":frmSucBod"
                                             icon="fa fa-plus"
                                             actionListener="#{man_sucursalesbodegas.guardarbodega()}"
                                             />
                            <p:commandButton title="Remover" styleClass="BotonRemover"
                                             update=":frmSucBod"
                                             icon="fa fa-minus"
                                             actionListener="#{man_sucursalesbodegas.eliminarbodega()}"
                                             />
                        </h:panelGrid>

                    </div>
                </p:panel>
                <p:dataTable id="dtSucBod" var="vSucBod" 
                             value="#{man_sucursalesbodegas.bodegas}" 
                             emptyMessage="No se encontraron resultados" 
                             selectionMode="single" selection="#{man_sucursalesbodegas.catbodegas}" 
                             rowKey="#{vSucBod.cod_bod}"
                             editable="false"
                             scrollable="true"
                             scrollHeight="90"
                             style="width:880px"
                             >
                    <p:ajax event="rowSelect" listener="#{man_sucursalesbodegas.onRowSelectBodega}" 
                            update=":frmSucBod"/>
                    <p:ajax event="rowUnselect" listener="#{man_sucursalesbodegas.onRowUnselectBodega}" 
                            update=":frmSucBod"/>

                    <p:column style="width:100px" headerText="Bodega">
                        <h:outputText value="#{vSucBod.nom_bod}" />
                    </p:column>
                </p:dataTable>
                <p:messages showDetail="true" autoUpdate="true" closable="true" />
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgSucBodEdit" widgetVar="wSucBodEdit" modal="true" 
                   width="450" height="400" closable="false" resizable="false" 
                   header="Editar Sucursales" rendered="true" 
                   dynamic="true" visible="false" style=" background-color: #deedf7;"
                   >
            <h:form id="frmSucBodEdit"> 
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wSucBodEdit').hide()"
                                         actionListener="#{man_sucursalesbodegas.cerrarventanaEdit()}"
                                         update=":frmSucBod"
                                         icon="fa fa-times"
                                         />

                    </f:facet>
                </p:toolbar>
                <p:dataTable id="dtSucBodEdit" var="vSucBodEdit" 
                             value="#{man_sucursalesbodegas.sucursales}" 
                             emptyMessage="No se encontraron resultados" 
                             selectionMode="single" selection="#{man_sucursalesbodegas.catsucursales}" 
                             rowKey="#{vSucBodEdit.cod_suc}"
                             editable="false"
                             scrollable="true"
                             scrollHeight="280"
                             style="width:430px"
                             widgetVar="wvSucBodEdit"
                             >
                    <p:ajax event="rowSelect" listener="#{man_sucursalesbodegas.onRowSelectEdit}" update=":frmSucBod"/>
                    <p:ajax event="rowUnselect"/>
                    <f:facet name="header">
                        <p:outputPanel>
                            <h:panelGroup>
                                <h:outputText value="Filtro:&nbsp;&nbsp;" />
                                <p:inputText style="width:250px;" placeholder="Nombre Sucursal" id="globalFilter" 
                                             />
                                <h:outputText value="&nbsp;" />
                                <p:commandButton value="Ir" style=" width: 40px;"
                                                 onclick="PF('wvSucBodEdit').filter()"
                                                 update=":frmSucBodEdit:dtSucBodEdit"
                                                 />
                            </h:panelGroup>
                        </p:outputPanel>
                    </f:facet>
                    <p:column style="width:100px" headerText="Sucursal" filterBy="#{vSucBodEdit.nom_suc}" filterMatchMode="contains"  
                              filterStyle="display:none; visibility:hidden;"    >
                        <h:outputText value="#{vSucBodEdit.nom_suc}" />
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        *************** Pantalla mantenimiento de Proveedores ******************
        *********************************************************************-->

        <p:dialog  id="dlgpro" widgetVar="wPro" modal="true" 
                   width="550" height="450" closable="false" resizable="false" 
                   header="Mantenimiento de Proveedores" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmPro"> 
                <p:growl id="msgPro" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manProveedores.nuevo()}"
                                         update=":frmPro"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manProveedores.guardar()}"
                                         update=":frmPro"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manProveedores.eliminar()}"
                                         update=":frmPro"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wPro').hide()"
                                         actionListener="#{manProveedores.cerrarventana()}"
                                         update=":frmPro"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #ebf8fe;">
                        <p:focus for="txtnombrepro" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombrepro" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manProveedores.nom_pro}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Persona Contacto" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="150"
                                         value="#{manProveedores.per_con}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Teléfono Contacto" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="20"
                                         value="#{manProveedores.tel_con}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Correo Electrónico" style="font-weight:bold;"/>
                            <p:inputText size="50"
                                         maxlength="100"
                                         value="#{manProveedores.det_mai}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtpro" var="vPro" 
                                 value="#{manProveedores.proveedores}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manProveedores.catproveedores}" 
                                 rowKey="#{vPro.cod_pro}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="170"
                                 style="width:500px"
                                 widgetVar="wvPro"
                                 >

                        <f:facet name="header">
                            <p:outputPanel style=" text-align: right;">
                                <h:panelGroup>
                                    <h:outputText value="Filtrar:&nbsp;&nbsp;" />
                                    <p:inputText id="globalFilter" 
                                                 onkeyup="PF('wvPro').filter()" 
                                                 style="width:250px;" 
                                                 placeholder="Proveedor o Contacto"/>
                                </h:panelGroup>

                            </p:outputPanel>
                        </f:facet>

                        <p:ajax event="rowSelect" listener="#{manProveedores.onRowSelect}" 
                                update=":frmPro"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:160px" headerText="Proveedor" filterBy="#{vPro.nom_pro}" filterMatchMode="contains"  
                                  filterStyle="display:none; visibility:hidden;">
                            <h:outputText value="#{vPro.nom_pro}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Contacto" filterBy="#{vPro.per_con}" filterMatchMode="contains"  
                                  filterStyle="display:none; visibility:hidden;">
                            <h:outputText value="#{vPro.per_con}" />
                        </p:column>
                        <p:column style="width:80px" headerText="Teléfono">
                            <h:outputText value="#{vPro.tel_con}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!-- *******************************************************************
        ***************** Artículos y control de inventario ********************
        *********************************************************************-->

        <p:dialog  id="dlgInventarioArt" widgetVar="wInventarioArt" modal="true" 
                   width="1000" height="520" closable="false" resizable="false" 
                   header="Inventario de Artículos" rendered="true" 
                   dynamic="false" visible="false" style="background-color: #deedf7;"
                   >

            <h:form id="frmInventarioArt"> 
                <p:growl id="msgInventarioArt" showDetail="true" life="8500"/>
                <p:accordionPanel activeIndex="#{man_inventario.index}">
                    <p:ajax event="tabChange" listener="#{man_inventario.onTabChange}"/>
                    <p:tab title="Artículos" id="tabartart">
                        <p:toolbar >
                            <f:facet name="left">
                                <p:commandButton value="Nuevo" styleClass="BotonNuevo"
                                                 actionListener="#{man_inventario.nuevoarticulo()}"
                                                 update=":frmInventarioArt"
                                                 icon="fa fa-file-o"
                                                 />
                                <p:commandButton value="Editar" styleClass="BotonEditar"
                                                 actionListener="#{man_inventario.editararticulo()}"
                                                 icon="fa fa-pencil"
                                                 />
                                <p:commandButton value="Guardar" styleClass="BotonGuardar"
                                                 actionListener="#{man_inventario.guardararticulo()}"
                                                 update=":frmInventarioArt"
                                                 icon="fa fa-floppy-o"
                                                 > 
                                    <p:confirm header="Guardar Registro" 
                                               message="¿Realmente desea Guardar este Registro?" 
                                               icon="fa fa-exclamation-triangle"/>
                                </p:commandButton>
                                <p:commandButton value="Eliminar" styleClass="BotonEliminar"
                                                 actionListener="#{man_inventario.eliminararticulo()}"
                                                 update=":frmInventarioArt"
                                                 icon="fa fa-trash-o"
                                                 >
                                    <p:confirm header="Eliminar Registro" 
                                               message="¿Realmente desea eliminar este Registro?" 
                                               icon="fa fa-exclamation-triangle"/>
                                </p:commandButton>

                                <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                                 onclick="PF('wInventarioArt').hide()"
                                                 actionListener="#{man_inventario.cerrarventana()}"
                                                 update=":frmInventarioArt"
                                                 icon="fa fa-times"
                                                 />

                            </f:facet>
                        </p:toolbar>
                        <p:panel styleClass="noBorders">
                            <div style=" background-color: #435055;">
                                <h:panelGrid columns="2" cellpadding="5">
                                    <h:panelGroup>
                                        <h:panelGrid columns="7" cellpadding="3">
                                            <h:outputText value="Grupo" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="Línea" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="Código Referencia" style="font-weight:bold;"/>
                                            <p:selectOneMenu value="#{man_inventario.art_cod_gru}" 
                                                             style="width:130px;text-align:right;"
                                                             autoWidth="false"
                                                             disabled="#{man_inventario.usogruposlineas}"
                                                             filter="true"
                                                             filterMatchMode="contains"
                                                             >  
                                                <f:selectItem itemLabel="Seleccione uno" itemValue="0" /> 
                                                <f:selectItems value="#{man_inventario.grupos}" var="artcodgru"
                                                               itemLabel="#{artcodgru.descripcion}" itemValue="#{artcodgru.codigo}"/>
                                            </p:selectOneMenu>
                                            <p:commandButton title="Refrescar" styleClass="BotonRefreshMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-refresh"
                                                             disabled="#{man_inventario.usogruposlineas}"
                                                             />
                                            <p:commandButton title="Grupos" styleClass="BotonMenuMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-bars"
                                                             disabled="#{man_inventario.usogruposlineas}"
                                                             />
                                            <p:selectOneMenu value="#{man_inventario.art_cod_lin}" 
                                                             style="width:130px;text-align:right;"
                                                             autoWidth="false"
                                                             disabled="#{man_inventario.usogruposlineas}"
                                                             filter="true"
                                                             filterMatchMode="contains"
                                                             >  
                                                <f:selectItem itemLabel="Seleccione una" itemValue="0" /> 
                                                <f:selectItems value="#{man_inventario.lineas}" var="artcodlin"
                                                               itemLabel="#{artcodlin.descripcion}" itemValue="#{artcodlin.codigo}"/>
                                            </p:selectOneMenu>
                                            <p:commandButton title="Refrescar" styleClass="BotonRefreshMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-refresh"
                                                             disabled="#{man_inventario.usogruposlineas}"
                                                             />
                                            <p:commandButton title="Líneas" styleClass="BotonMenuMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-bars"
                                                             disabled="#{man_inventario.usogruposlineas}"
                                                             />
                                            <p:inputText size="34" maxlength="30" value="#{man_inventario.art_cod_ref}" onfocus="this.select()" disabled="#{!man_inventario.usocodigoauto}" />
                                            <h:outputText value="Marca" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="Unidad Medida" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:panelGroup>
                                                <h:panelGrid columns="5" cellpadding="6">
                                                    <h:outputText value="Exento" style="font-weight:bold;"/>
                                                    <h:outputText value="Perec." style="font-weight:bold;"/>
                                                    <h:outputText value="U.Lote" style="font-weight:bold;"/>
                                                    <h:outputText value="Import." style="font-weight:bold;"/>
                                                    <h:outputText value="Export." style="font-weight:bold;"/>
                                                </h:panelGrid>
                                            </h:panelGroup>
                                            <p:selectOneMenu value="#{man_inventario.art_cod_mar}" 
                                                             style="width:130px;text-align:right;"
                                                             autoWidth="false"
                                                             filter="true"
                                                             filterMatchMode="contains"
                                                             >  
                                                <f:selectItem itemLabel="Seleccione una" itemValue="0" /> 
                                                <f:selectItems value="#{man_inventario.marcas}" var="artcodmar"
                                                               itemLabel="#{artcodmar.descripcion}" itemValue="#{artcodmar.codigo}"/>
                                            </p:selectOneMenu>
                                            <p:commandButton title="Refrescar" styleClass="BotonRefreshMini"
                                                             actionListener="#{man_inventario.llenarMarcas()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-refresh"
                                                             />
                                            <p:commandButton title="Marcas" styleClass="BotonMenuMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-bars"
                                                             />
                                            <p:selectOneMenu value="#{man_inventario.art_cod_uni_med}" 
                                                             style="width:130px;text-align:right;"
                                                             autoWidth="false"
                                                             filter="true"
                                                             filterMatchMode="contains"
                                                             >  
                                                <f:selectItem itemLabel="Seleccione una" itemValue="0" /> 
                                                <f:selectItems value="#{man_inventario.unidades}" var="artcodunimed"
                                                               itemLabel="#{artcodunimed.descripcion}" itemValue="#{artcodunimed.codigo}"/>
                                            </p:selectOneMenu>
                                            <p:commandButton title="Refrescar" styleClass="BotonRefreshMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-refresh"
                                                             />
                                            <p:commandButton title="Unidades de Medida" styleClass="BotonMenuMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-bars"
                                                             />

                                            <h:panelGroup>
                                                <h:panelGrid columns="5" cellpadding="4">
                                                    <p:selectBooleanButton value="#{man_inventario.art_flg_exe}" offLabel="No" onLabel="Sí" style="width: 35px;" />
                                                    <p:selectBooleanButton value="#{man_inventario.art_flg_per}" offLabel="No" onLabel="Sí" style="width: 35px;"/>
                                                    <p:selectBooleanButton value="#{man_inventario.art_flg_usa_lot}" offLabel="No" onLabel="Sí" style="width: 35px;"/>
                                                    <p:selectBooleanButton value="#{man_inventario.art_flg_imp}" offLabel="No" onLabel="Sí" style="width: 35px;"/>
                                                    <p:selectBooleanButton value="#{man_inventario.art_flg_exp}" offLabel="No" onLabel="Sí" style="width: 35px;"/>
                                                </h:panelGrid>
                                            </h:panelGroup>

                                            <h:outputText value="Temperatura" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="Registro Sanitario" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="Precio Venta Sin Impuestos" style="font-weight:bold;"/>
                                            <p:selectOneMenu value="#{man_inventario.art_cod_tem}" 
                                                             style="width:130px;text-align:right;"
                                                             autoWidth="false"
                                                             filter="true"
                                                             filterMatchMode="contains"
                                                             >  
                                                <f:selectItem itemLabel="Temp. Ambiente" itemValue="0" /> 
                                                <f:selectItems value="#{man_inventario.temperaturas}" var="arttemperatura"
                                                               itemLabel="#{arttemperatura.descripcion}" itemValue="#{arttemperatura.codigo}"/>
                                            </p:selectOneMenu>
                                            <p:commandButton title="Refrescar" styleClass="BotonRefreshMini"
                                                             actionListener="#{man_inventario.llenarTemperaturas()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-refresh"
                                                             />
                                            <p:commandButton title="Unidades de Medida" styleClass="BotonMenuMini"
                                                             actionListener="#{man_inventario.llenarArticulos()}"
                                                             update=":frmInventarioArt"
                                                             icon="fa fa-bars"
                                                             />
                                            <p:inputText size="22" maxlength="150" value="#{man_inventario.art_reg_san}" onfocus="this.select()"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <h:outputText value="" style="font-weight:bold;"/>
                                            <p:inputNumber value="#{man_inventario.art_pre_sin_iva}" decimalPlaces="2" minValue="0" size="34" />

                                        </h:panelGrid>
                                        <h:panelGrid columns="1" cellpadding="5">
                                            <h:outputText value="Nombre Artículo" style="font-weight:bold;"/>
                                            <p:inputText size="105" maxlength="150" value="#{man_inventario.art_nom_art}" onfocus="this.select()" />
                                            <h:outputText value="Descripción" style="font-weight:bold;"/>
                                            <p:inputTextarea value="#{man_inventario.art_des_art}" rows="1" cols="103" onfocus="this.select()" />
                                        </h:panelGrid>
                                    </h:panelGroup>
                                    <h:panelGroup>
                                        <p:graphicImage id="imgArtInvArt" value="#{man_inventario.mimagen}" 
                                                        cache="false" width="170" height="#{man_inventario.mheight}" />
                                        <p:fileUpload fileUploadListener="#{man_inventario.upload}" 
                                                      mode="advanced" dragDropSupport="true"
                                                      fileLimit="1" 
                                                      allowTypes="/(\.|\/)(jpg|JPG|jepg|JEPG|gif|GIF|png|PNG)$/" 
                                                      update="imgArtInvArt"
                                                      label="Seleccionar Imagen" 
                                                      cancelLabel="Cancelar" 
                                                      uploadLabel="Subir" 
                                                      auto="true"
                                                      />
                                    </h:panelGroup>
                                </h:panelGrid>
                            </div>
                        </p:panel>
                    </p:tab>
                    <p:tab title="Existencias Inventario">
                        <p:toolbar >
                            <f:facet name="left">
                                <p:commandButton value="Detalle por Artículo" styleClass="BotonHistoria"
                                                 actionListener="#{man_inventario.iniciarDetallePorArticulo()}"
                                                 icon="fa fa-info-circle"
                                                 />
                                <p:commandButton value="Ajuste Manual" styleClass="BotonEditar"
                                                 actionListener="#{man_inventario.iniciarAjusteManual()}"
                                                 icon="fa fa-hand-pointer-o"
                                                 />
                                <p:commandButton value="Entradas y Salidas" styleClass="BotonEditar"
                                                 actionListener="#{man_inventario.iniciarEntradasSalidas()}"
                                                 icon="fa fa-expand"
                                                 />
                                <p:commandButton value="Configurar Max y Min" styleClass="BotonAlerta"
                                                 actionListener="#{man_inventario.iniciarMaxMin()}"
                                                 icon="fa fa-exclamation"
                                                 />
                                <p:commandButton value="Cerrar Ventana" styleClass="BotonCerrar"
                                                 onclick="PF('wInventarioArt').hide()"
                                                 actionListener="#{man_inventario.cerrarventana()}"
                                                 update=":frmInventarioArt"
                                                 icon="fa fa-times"
                                                 />

                            </f:facet>
                        </p:toolbar>
                        <p:panel >
                            <div style=" background-color: #435055;">
                                <h:panelGrid columns="7" cellpadding="5" styleClass="noBorders">
                                    <h:outputText value="Fecha Transacción" style="font-weight:bold;"/>
                                    <p:calendar  pattern="dd/MM/yyyy" locale="es" 
                                                 readonlyInput="true" showOn="button" size="16"
                                                 style="width: 20px"
                                                 value="#{man_inventario.mfecha}" 
                                                 navigator="true"
                                                 >
                                        <p:ajax event="dateSelect" listener="#{man_inventario.dateSelectedFectra}" />
                                    </p:calendar>
                                    <h:outputText value="Bodega" style="font-weight:bold;"/>
                                    <p:selectOneMenu value="#{man_inventario.cod_bod}" 
                                                     style="width:250px;text-align:right;"
                                                     autoWidth="false"
                                                     filter="true"
                                                     filterMatchMode="contains"
                                                     >  
                                        <p:ajax event="change" listener="#{man_inventario.llenarExistenciasActuales()}" update="dtInvArt"/>
                                        <f:selectItem itemLabel="Seleccione uno" itemValue="0" /> 
                                        <f:selectItems value="#{man_inventario.bodegas}" var="invcodbod"
                                                       itemLabel="#{invcodbod.descripcion}" itemValue="#{invcodbod.codigo}"/>
                                    </p:selectOneMenu>
                                    <p:commandButton title="Refrescar" styleClass="BotonRefreshMini"
                                                     actionListener="#{man_inventario.llenarExistenciasActuales()}"
                                                     update="dtInvArt"
                                                     icon="fa fa-refresh"
                                                     />
                                    <p:commandButton title="Bodegas" styleClass="BotonMenuMini"
                                                     actionListener="#{man_inventario.llenarArticulos()}"
                                                     update=":frmInventarioArt"
                                                     icon="fa fa-bars"
                                                     />
                                </h:panelGrid>
                            </div>
                            <p:dataTable id="dtInvArt" var="vInvArt" 
                                         value="#{man_inventario.inventario}" 
                                         emptyMessage="No se encontraron resultados" 
                                         selectionMode="single" 
                                         selection="#{man_inventario.catinventario}" 
                                         rowKey="#{vInvArt.cod_art}"
                                         editable="false" 
                                         scrollable="true"
                                         scrollHeight="210"
                                         style="width:905px"
                                         widgetVar="wvInvArt"
                                         >

                                <f:facet name="header">
                                    <p:outputPanel style=" text-align: right;">
                                        <h:panelGroup>
                                            <h:outputText value="Filtrar:&nbsp;&nbsp;" />
                                            <p:inputText style="width:350px;" 
                                                         placeholder="Código, Nombre Artículo"/>
                                            <h:outputText value="&nbsp;&nbsp;" />
                                            <p:commandButton value="Ir" style=" width: 40px;"
                                                             onclick="PF('wvInvArt').filter()"
                                                             update="dtInvArt"
                                                             />
                                        </h:panelGroup>

                                    </p:outputPanel>
                                </f:facet>

                                <p:ajax event="rowSelect" listener="#{man_inventario.onSelectExistencia}" 
                                        />
                                <p:ajax event="rowUnselect"/>

                                <p:column style="width:40px" headerText="Nombre Artículo" filterBy="#{vInvArt.nomart}" filterMatchMode="contains"  
                                          filterStyle="display:none; visibility:hidden;">
                                    <h:outputText value="#{vInvArt.nomart}" />
                                </p:column>
                                <p:column style="width:40px" headerText="Uni.Med.">
                                    <h:outputText value="#{vInvArt.unimed}" />
                                </p:column>
                                <p:column style="width:12px" headerText="Exis. Actual">
                                    <h:outputText value="#{vInvArt.exi_act_bod}" />
                                </p:column>


                            </p:dataTable>
                        </p:panel>
                    </p:tab>
                </p:accordionPanel>
                <div style=" background-color: #fefeff;">
                    <p:messages showDetail="true" autoUpdate="true" closable="true" />
                </div>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgArtEdit" widgetVar="wArtEdit" modal="true" 
                   width="450" height="400" closable="false" resizable="false" 
                   header="Editar Artículos" rendered="true" 
                   dynamic="true" visible="false" style=" background-color: #deedf7;"
                   >
            <h:form id="frmArtEdit"> 
                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wArtEdit').hide()"
                                         actionListener="#{man_inventario.cerrararticulo()}"
                                         update=":frmArtEdit"
                                         icon="fa fa-times"
                                         />

                    </f:facet>
                </p:toolbar>
                <p:dataTable id="dtArtEdit" var="vArtEdit" 
                             value="#{man_inventario.articulos}" 
                             emptyMessage="No se encontraron resultados" 
                             selectionMode="single" selection="#{man_inventario.catarticulos}" 
                             rowKey="#{vArtEdit.cod_art}"
                             editable="false"
                             scrollable="true"
                             scrollHeight="280"
                             style="width:430px"
                             widgetVar="wvArtEdit"
                             >
                    <p:ajax event="rowSelect" listener="#{man_inventario.onRowSelectEditArt}" update=":frmInventarioArt"/>
                    <p:ajax event="rowUnselect"/>
                    <f:facet name="header">
                        <p:outputPanel>
                            <h:panelGroup>
                                <h:outputText value="Filtro:&nbsp;&nbsp;" />
                                <p:inputText style="width:250px;" placeholder="Código, Nombre" />
                                <h:outputText value="&nbsp;" />
                                <p:commandButton value="Ir" style=" width: 40px;"
                                                 onclick="PF('wvArtEdit').filter()"
                                                 update=":frmArtEdit:dtArtEdit"
                                                 />
                            </h:panelGroup>
                        </p:outputPanel>
                    </f:facet>
                    <p:column style="width:30px" headerText="Código" filterBy="#{vArtEdit.cod_ref}" filterMatchMode="contains"  
                              filterStyle="display:none; visibility:hidden;"    >
                        <h:outputText value="#{vArtEdit.cod_ref}" />
                    </p:column>
                    <p:column style="width:70px" headerText="Nombre Artículo" filterBy="#{vArtEdit.nom_art}" filterMatchMode="contains"  
                              filterStyle="display:none; visibility:hidden;"    >
                        <h:outputText value="#{vArtEdit.nom_art}" />
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>
        
         <!--******************************************************************** 
        ********************* Pantallas Almacén Productos ***********************
        *********************************************************************-->

        <p:dialog  id="dlgInventarioPro" widgetVar="wInventarioPro" modal="true" 
                   width="1090" height="540" closable="false" resizable="false" 
                   header="Inventario de Productos" rendered="true" 
                   dynamic="true" visible="false"  styleClass="altoLinea" style=" background: #deedf7;"
                   >
            <h:form id="frmInventarioPro">
                <p:growl id="msgInventarioPro" showDetail="true" life="4500"/>
                <p:toolbar style="background: #FFFFFF;">
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px; background:  #4e6a71; color: #F3F3F3; "
                                         actionListener="#{man_inventario.nuevoentradasalida()}"
                                         update=":frmInventarioPro"
                                         icon="fa fa-file-o"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px; background:  #4e6a71; color: #F3F3F3;"
                                         actionListener="#{man_inventario.guardar()}"
                                         update=":frmInventarioPro"
                                         icon="fa fa-floppy-o"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Modificar" style=" width: 100px; background:  #4e6a71; color: #F3F3F3;"
                                         onclick="PF('wBuscarIng').show()"
                                         actionListener="#{man_inventario.llenarEncabezado()}"
                                         update=":frmBuscarIng"
                                         icon="fa fa-search"
                                         />
                        <p:commandButton value="Imprimir" style=" width: 100px; background:  #4e6a71; color: #F3F3F3;"
                                         actionListener="#{man_inventario.imprimir()}"
                                         onclick="this.form.target = '_blank';"
                                         icon="fa fa-print"
                                         ajax="false"
                                         />
                        <span class="ui-separator">
                            <span class="ui-icon ui-icon-grip-dotted-vertical" />
                        </span>
                        <p:commandButton value="Traslado" style=" width: 100px; background: #FFFF00; color:  black;"
                                         actionListener="#{man_inventario.iniciartraslado()}"
                                         icon="fa fa-exchange"
                                         update =":frmInventarioPro"
                                         />
                        <span class="ui-separator">
                            <span class="ui-icon ui-icon-grip-dotted-vertical" />
                        </span>
                        <p:commandButton value="Fecha Ven" style=" width: 100px; background: aqua; color:  black;"
                                         actionListener="#{man_inventario.iniciareditfechaven()}"
                                         icon="fa fa-clock-o"
                                         />
                        <span class="ui-separator">
                            <span class="ui-icon ui-icon-grip-dotted-vertical" />
                        </span>
                        <p:commandButton value="Anular" style=" width: 100px; background: #FF0000; color: #F3F3F3; "
                                         actionListener="#{man_inventario.iniciaranular()}"
                                         update=":frmInventarioPro"
                                         icon="fa fa-ban"
                                         >
                            <p:confirm header="Anular Registro" 
                                       message="¿Realmente desea Anular este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <span class="ui-separator">
                            <span class="ui-icon ui-icon-grip-dotted-vertical" />
                        </span>
                        <p:commandButton value="Vencidos" style=" width: 100px; background: #FF0000; color: #F3F3F3; "
                                         actionListener="#{man_inventario.iniciarvencidos()}"
                                         onclick="PF('wCargarVencidos').show()"
                                         update=":frmCargarVencidos"
                                         icon="fa fa-bug"
                                         />
                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wInventarioPro').hide()"
                                         actionListener="#{man_inventario.cerrarEntradasSalidas()}"
                                         update=":frmInventarioPro"
                                         icon="ui-icon-close"
                                         />
                    </f:facet>
                </p:toolbar>

                <p:panel id="panencabezadopro" style="background: #FFFFFF;">
                    <div style=" background: #435055;">
                        <h:panelGrid columns="5" cellpadding="5">
                            <h:outputText value="" style="font-weight:bold;"/>
                            <h:outputText value="Fecha" style="font-weight:bold;"/>
                            <h:outputText value="#{man_inventario.titulo}" style="font-weight:bold;"/>
                            <h:outputText value="Área que Recibe" style="font-weight:bold;"/>
                            <h:outputText value="Responsable" style="font-weight:bold;"/>
                            <p:selectBooleanButton offLabel="Entrada" offIcon="fa fa-plus-circle" 
                                                   onLabel="Salida" onIcon="fa fa-minus-circle" 
                                                   value="#{man_inventario.flg_ing_sal}" style="width: 90px;" >
                                <p:ajax listener="#{man_inventario.inout()}" update=":frmInventarioPro" />
                            </p:selectBooleanButton>
                            <p:calendar  value="#{man_inventario.mfecha}"
                                         pattern="dd/MM/yyyy" 
                                         locale="es" 
                                         readonlyInput="true" 
                                         showOn="button" 
                                         size="16"
                                         style="width: 10px"
                                         navigator="true"
                                         >
                                <p:ajax event="dateSelect" listener="#{man_inventario.dateSelectedAction}" />
                            </p:calendar> 
                            <p:selectOneMenu id="somprolstpro" 
                                             value="#{man_inventario.cod_cli_pro}" 
                                             style=" width: 160px;"
                                             autoWidth="false"
                                             >
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.clientesproveedores}" var="lstpropro"
                                               itemLabel="#{lstpropro.descripcion}" itemValue="#{lstpropro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:selectOneMenu value="#{man_inventario.cod_are}" 
                                             style=" width: 190px;"
                                             autoWidth="false"
                                             id="espareainvpro"
                                             disabled="#{!man_inventario.flg_ing_sal}"
                                             >
                                <f:selectItem itemLabel="Ninguna" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.areas}" var="lstareastrapro"
                                               itemLabel="#{lstareastrapro.descripcion}" itemValue="#{lstareastrapro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:selectOneMenu value="#{man_inventario.cod_res}" 
                                             style=" width: 190px;"
                                             autoWidth="false"
                                             id="espinvpro"
                                             disabled="#{!man_inventario.flg_ing_sal}"
                                             >
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.responsables}" var="lstespecitrapro"
                                               itemLabel="#{lstespecitrapro.descripcion}" itemValue="#{lstespecitrapro.codigo}"/> 
                            </p:selectOneMenu>
                            <h:outputText value="" style="font-weight:bold;"/>
                            <h:outputText value="Documento" style="font-weight:bold;"/>
                            <h:outputText value="N° Documento" style="font-weight:bold;"/>
                            <h:outputText value="Tipo de Operación" style="font-weight:bold;"/>
                            <h:outputText value="Correlativo de Operación" style="font-weight:bold;"/>
                            <h:outputText value="" style="font-weight:bold;"/>
                            <p:selectOneMenu value="#{man_inventario.cod_tip_doc_ext}" 
                                             style=" width: 130px;"
                                             autoWidth="false"
                                             id="tipdocext"
                                             >
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.tiposdocext}" var="lstmovpro"
                                               itemLabel="#{lstmovpro.descripcion}" itemValue="#{lstmovpro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:inputText maxlength="25" size="26" value="#{man_inventario.doc_ext}" />
                            <p:selectOneMenu value="#{man_inventario.cod_tip_doc_int}" 
                                             style=" width: 190px;"
                                             autoWidth="false"
                                             id="tipdocint"
                                             >
                                <p:ajax event="change" listener="#{man_inventario.onSelectDocInt()}" 
                                        update="cormovproinv" />
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.tiposdocint}" var="lstmovpro"
                                               itemLabel="#{lstmovpro.descripcion}" itemValue="#{lstmovpro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:inputText id="cormovproinv" maxlength="20" size="31" value="#{man_inventario.doc_int}" readonly="true"/>



                        </h:panelGrid>    

                        <h:panelGrid columns="1" cellpadding="5">
                            <h:outputText value="Observaciones" style="font-weight:bold;"/>
                            <p:inputText maxlength="200" size="139" value="#{man_inventario.det_obs}"/>
                        </h:panelGrid>
                    </div>
                </p:panel>
                <p:panel id="detallearticulos" style="background: #FFFFFF;">
                    <div style=" background: #435055;">
                        <h:panelGrid columns="6" cellpadding="5">
                            <h:outputText value="Producto" style="font-weight:bold;"/>
                            <h:outputText value="Unidad de Medida" style="font-weight:bold;"/>
                            <h:outputText value="" style="font-weight:bold;"/>
                            <h:outputText value="" style="font-weight:bold;"/>
                            <h:outputText value="Bodega" style="font-weight:bold;"/>
                            <h:outputText value="Existencia" style="font-weight:bold;"/>
                            <p:selectOneMenu value="#{man_inventario.cod_art}" 
                                             style=" width: 440px;"
                                             filter="true" 
                                             filterMatchMode="contains"
                                             id="somartpro"
                                             autoWidth="false"
                                             >
                                <p:ajax event="change" listener="#{man_inventario.seleccionarproducto()}" 
                                        update="sombodpro,somubipro,somlotpro,calfecven,txtnomunipro,somunimedpro,txtexirealinvpro" />
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.productos}" var="lstpiepro"
                                               itemLabel="#{lstpiepro.descripcion}" itemValue="#{lstpiepro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:inputText readonly="true" size="25" value="#{man_inventario.nombreunidad}" id="txtnomunipro"/>
                            <p:commandButton title="Imagen" 
                                             icon="ui-icon-image" 
                                             style=" width: 30px;" 
                                             actionListener="#{man_inventario.iniciarimagen()}"
                                             onclick="PF('wImgPro').show()"
                                             update=":frmImgPro"
                                             />
                            <p:commandButton title="Existencias" 
                                             icon="ui-icon-search" 
                                             style=" width: 30px;" 
                                             actionListener="#{man_inventario.iniciarventanaexistencias(0)}"
                                             onclick="PF('wExistenciasLot').show()"
                                             />

                            <p:selectOneMenu id="sombodpro" 
                                             value="#{man_inventario.cod_bod}" 
                                             style=" width: 170px;"
                                             autoWidth="false"
                                             >
                                <p:ajax event="change" listener="#{man_inventario.seleccionarbodega()}" update="somubipro,somlotpro,calfecven,txtexirealinvpro" />
                                <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.bodegas}" var="lstbodpro"
                                               itemLabel="#{lstbodpro.descripcion}" itemValue="#{lstbodpro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:inputText id="txtexirealinvpro" readonly="true" size="10" value="#{man_inventario.existenciareal}"/>
                        </h:panelGrid>
                        <h:panelGrid columns="8" cellpadding="5">
                            <h:outputText value="Ubicación" style="font-weight:bold;"/>
                            <h:outputText value="Lote" style="font-weight:bold;"/>
                            <h:outputText value="Fec.Vencimiento" style="font-weight:bold;"/>
                            <h:outputText value="Cantidad" style="font-weight:bold;"/>
                            <h:outputText value="Unidad Medida" style="font-weight:bold;"/>
                            <h:outputText value="Costo Total" style="font-weight:bold;"/>
                            <h:outputText value="" style="font-weight:bold;"/>
                            <h:outputText value="" style="font-weight:bold;"/>

                            <p:selectOneMenu id="somubipro" 
                                             value="#{man_inventario.cod_ubi}" 
                                             style=" width: 170px;"
                                             autoWidth="false"
                                             >
                                <p:ajax event="change" listener="#{man_inventario.seleccionarUbicaciones()}" update="somlotpro,calfecven" />
                                <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.ubicaciones}" var="lstubipro"
                                               itemLabel="#{lstubipro.descripcion}" itemValue="#{lstubipro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:selectOneMenu id="somlotpro" 
                                             value="#{man_inventario.det_lot}" 
                                             style=" width: 150px;"
                                             autoWidth="false"
                                             filter="true"
                                             filterMatchMode="contains"
                                             editable="#{!man_inventario.flg_ing_sal}"
                                             disabled="#{!man_inventario.usolote}"
                                             >
                                <p:ajax event="change" listener="#{man_inventario.onselectlote()}" update="calfecven" />
                                <f:selectItems value="#{man_inventario.lotes}" var="lstlotpro"
                                               itemLabel="#{lstlotpro.descripcion}" itemValue="#{lstlotpro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:calendar id="calfecven" 
                                        value="#{man_inventario.mfechaven}"
                                        pattern="dd/MM/yyyy" 
                                        locale="es" 
                                        readonlyInput="true" 
                                        showOn="button" 
                                        size="13"
                                        style="width: 10px"
                                        navigator="true"
                                        disabled="#{!man_inventario.usofechaven}"
                                        >
                                <p:ajax event="dateSelect" listener="#{man_inventario.dateVenSelectedAction}" />
                            </p:calendar> 
                            <p:inputNumber size="12" value="#{man_inventario.det_can}" minValue="0" decimalPlaces="2" />
                            <p:selectOneMenu id="somunimedpro" 
                                             value="#{man_inventario.uni_med_con}" 
                                             style=" width: 170px;"
                                             autoWidth="false"
                                             >
                                <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                                <f:selectItems value="#{man_inventario.unidades}" var="lstunimedpro"
                                               itemLabel="#{lstunimedpro.descripcion}" itemValue="#{lstunimedpro.codigo}"/> 
                            </p:selectOneMenu>
                            <p:inputNumber size="12" value="#{man_inventario.det_cos}" 
                                           minValue="0" decimalPlaces="2" 
                                           disabled="#{man_inventario.usocosto}" />
                            <p:commandButton title="Agregar" 
                                             icon="ui-icon-plus" 
                                             style=" width: 30px;" 
                                             actionListener="#{man_inventario.agregardetalle()}" 
                                             update="detallearticulos,dtInvPro,:frmInventarioPro:msgInventarioPro"
                                             />
                            <p:commandButton title="Remover" 
                                             icon="ui-icon-minus" 
                                             style=" width: 30px;" 
                                             actionListener="#{man_inventario.eliminardetalle()}" 
                                             update="detallearticulos,dtInvPro"
                                             />
                        </h:panelGrid>
                    </div>
                </p:panel>
                <p:dataTable id="dtInvPro" var="vDetInvPro" 
                             value="#{man_inventario.detalles}" 
                             emptyMessage="No se encontraron resultados" 
                             selection="#{man_inventario.cattransaccionesdetalle}" 
                             selectionMode="single"
                             rowKey="#{vDetInvPro.cod_det}"
                             editable="false"
                             scrollable="true"
                             scrollHeight="120"
                             style="width:1067px"
                             >

                    <p:ajax event="rowSelect" listener="#{man_inventario.onRowSelectDetalleAlmacen}" 
                            update=":frmInventarioPro:detallearticulos"/>

                    <p:column style="width:1px;" headerText="Item">
                        <h:outputText value="#{vDetInvPro.cod_det}" />
                    </p:column>
                    <p:column style="width:25px;" headerText="Bodega">
                        <h:outputText value="#{vDetInvPro.nombod}" />
                    </p:column>
                    <p:column style="width:40px;" headerText="Ubicación">
                        <h:outputText value="#{vDetInvPro.nomubi}" />
                    </p:column>
                    <p:column style="width:20px;" headerText="Código">
                        <h:outputText value="#{vDetInvPro.codrefart}" />
                    </p:column>
                    <p:column style="width:80px;" headerText="Producto">
                        <h:outputText value="#{vDetInvPro.nomart}" />
                    </p:column>
                    <p:column style="width:40px;" headerText="Lote">
                        <h:outputText value="#{vDetInvPro.det_lot}" />
                    </p:column>
                    <p:column style="width:40px;" headerText="Vencimiento">
                        <h:outputText value="#{vDetInvPro.fec_ven}" />
                    </p:column>
                    <p:column style="width:25px;" headerText="Cantidad">
                        <h:outputText value="#{vDetInvPro.det_can_con}" />
                    </p:column>
                    <p:column style="width:50px;" headerText="Uni.Med">
                        <h:outputText value="#{vDetInvPro.nomunimed}" />
                    </p:column>
                    <p:column style="width:25px;" headerText="Costo">
                        <h:outputText value="#{vDetInvPro.det_cos}" />
                    </p:column>

                </p:dataTable>

            </h:form>
        </p:dialog>

        <p:dialog  id="dlgImgPro" widgetVar="wImgPro" modal="true" 
                   width="360" height="360" closable="true" resizable="false" 
                   header="Imagen de Producto" rendered="true" 
                   dynamic="true" visible="false"
                   >
            <p:ajax event="close" listener="#{man_inventario.onCloseImg}" update=":frmImgPro"/>

            <h:form id="frmImgPro">
                <div align="center">
                    <h:panelGrid columns="1">
                        <p:graphicImage value="#{man_inventario.mimagen2}"
                                        cache="false" width="270" height="#{man_inventario.mheight2}" />

                        <h:outputText value="Marca: #{man_inventario.nombremarca}" style="font-weight:bold;"/>
                        <h:outputText value="Producto: #{man_inventario.nomprod}" style="font-weight:bold;"/>
                    </h:panelGrid>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgBuscarIng" widgetVar="wBuscarIng" modal="true" 
                   width="900" height="460" closable="false" resizable="false" 
                   header="Buscar" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmBuscarIng"> 

                <p:toolbar>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wBuscarIng').hide()"
                                         update=":frmInventarioPro"
                                         icon="ui-icon-close"
                                         actionListener="#{man_inventario.cerrarbuscar()}"
                                         />
                    </f:facet>
                </p:toolbar>
                <p:panel>
                    <p:dataTable id="dtIngBuscar" var="vIngBuscar" 
                                 value="#{man_inventario.encabezado}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{man_inventario.cattransacciones}" 
                                 rowKey="#{vIngBuscar.cod_tra}"
                                 editable="false" 
                                 style="width:840px"
                                 widgetVar="wDTIngBuscar"
                                 scrollable="true"
                                 scrollHeight="300"
                                 >
                        <p:ajax event="rowSelect" listener="#{man_inventario.onRowSelectBuscar}" 
                                update=":frmInventarioPro"/>

                        <f:facet name="header">
                            <p:outputPanel>
                                <h:panelGrid columns="2" cellpadding="1" styleClass="noBorders">
                                    <h:outputText value="Filtrar:" />
                                    <p:inputText id="globalFilter" 
                                                 onkeyup="PF('wDTIngBuscar').filter()" 
                                                 style="width:250px" 
                                                 placeholder="Expresión Filtro"
                                                 />
                                </h:panelGrid>
                            </p:outputPanel>
                        </f:facet>


                        <p:column style="width:10px" headerText="Dirección" filterBy="#{vIngBuscar.ingsal}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vIngBuscar.ingsal}" />
                        </p:column>
                        <p:column style="width:15px" headerText="Fecha" filterBy="#{vIngBuscar.fec_tra}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vIngBuscar.fec_tra}" />
                        </p:column>
                        <p:column style="width:30px" headerText="Operación" filterBy="#{vIngBuscar.nommov}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vIngBuscar.nommov}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Documento" filterBy="#{vIngBuscar.coddoc}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;">
                            <h:outputText value="#{vIngBuscar.coddoc}" />
                        </p:column>
                        <p:column style="width:40px" headerText="A Favor de" filterBy="#{vIngBuscar.nomclipro}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;">
                            <h:outputText value="#{vIngBuscar.nomclipro}" />
                        </p:column>

                    </p:dataTable>
                </p:panel> 
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgEditFecVen" widgetVar="wEditFecVen" modal="true" 
                   width="550" height="160" closable="false" resizable="false" 
                   header="Editar Fecha de Vencimiento" rendered="true" 
                   dynamic="true" visible="false"
                   >
            <h:form id="frmEditFecVen">
                <p:growl id="msgEditFecVen" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{man_inventario.guardareditfechaven()}"
                                         update=":frmEditFecVen"
                                         icon="ui-icon-disk"
                                         disabled="#{manSeguridad.disableOpt('botonGuardarInvProd')}" 
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>

                    </f:facet>
                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wEditFecVen').hide()"
                                         actionListener="#{man_inventario.cerrareditfechaven()}"
                                         update=":frmEditFecVen"
                                         icon="ui-icon-close"
                                         />


                    </f:facet>
                </p:toolbar>
                <p:panel>
                    <div style=" background: #ebfcfc;">
                        <h:panelGrid columns="2" cellpadding="5" >
                            <h:outputText value="Artículo" style="font-weight:bold;"/>
                            <p:inputText value="#{man_inventario.editfecvennomart}" size="60" readonly="true"/>
                            <h:outputText value="Lote" style="font-weight:bold;"/>
                            <p:inputText value="#{man_inventario.det_lot}" size="60" readonly="true"/>
                            <h:outputText value="Fec.Vencimiento" style="font-weight:bold;"/>
                            <p:calendar  value="#{man_inventario.datefecvenedit}"
                                         pattern="dd/MM/yyyy" 
                                         locale="es" 
                                         readonlyInput="true" 
                                         showOn="button" 
                                         size="16"
                                         style="width: 10px"
                                         navigator="true"
                                         >
                            </p:calendar> 
                        </h:panelGrid>
                    </div>
                </p:panel>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgAnularInvArt" widgetVar="wAnularInvArt" modal="true" 
                   width="400" height="260" closable="false" resizable="false" 
                   header="Anulación de Documentos" rendered="true" 
                   dynamic="true" visible="false" 
                   >
            <h:form id="frmAnularInvArt"> 
                <p:growl id="msgObsAnuInvArt" showDetail="true" life="8500"/>
                <p:panel>
                    <h:panelGrid columns="1" cellpadding="5">
                        <h:outputText value="Operación de Retorno" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{man_inventario.anu_tip_mov}" 
                                         style="width:300px;text-align:right;"
                                         autoWidth="false"
                                         filter="true"
                                         filterMatchMode="contains"
                                         >  
                            <f:selectItem itemLabel="Seleccione uno" itemValue="0" /> 
                            <f:selectItems value="#{man_inventario.tiposdocint}" var="somanuvar"
                                           itemLabel="#{somanuvar.descripcion}" itemValue="#{somanuvar.codigo}"/>
                        </p:selectOneMenu>
                        <h:outputText value="Observaciones de Anulación" />
                        <p:inputTextarea rows="6" maxlength="410" cols="45" value="#{man_inventario.obs_anu}"/>
                    </h:panelGrid>
                </p:panel>
                <br></br>
                <div align="center">
                    <h:panelGrid columns="2" cellpadding="5">
                        <p:commandButton value="Anular" style="width: 100px;"
                                         icon="fa fa-ban"
                                         actionListener="#{man_inventario.anular()}"
                                         update=":frmAnularInvArt"
                                         />
                        <p:commandButton value="Cerrar" style="width: 100px;"
                                         icon="fa fa-times"
                                         onclick="PF('wAnularInvArt').hide()"
                                         actionListener="#{man_inventario.cerraranular()}"
                                         update=":frmInventarioPro"
                                         />

                    </h:panelGrid>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgTrasladoInvArt" widgetVar="wTrasladoInvArt" modal="true" 
                   width="400" height="200" closable="false" resizable="false" 
                   header="Traslado de Productos" rendered="true" 
                   dynamic="true" visible="false" 
                   >
            <h:form id="frmTrasladoInvArt"> 
                <p:growl id="msgTrasladoInvArt" showDetail="true" life="8500"/>
                <p:panel>
                    <h:panelGrid columns="1" cellpadding="5">
                        <h:outputText value="Operación de Traslado" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{man_inventario.tra_cod_tip_doc_int}" 
                                         style="width:300px;text-align:right;"
                                         autoWidth="false"
                                         filter="true"
                                         filterMatchMode="contains"
                                         >  
                            <f:selectItem itemLabel="Seleccione uno" itemValue="0" /> 
                            <f:selectItems value="#{man_inventario.tiposdocint}" var="somtrasvar"
                                           itemLabel="#{somtrasvar.descripcion}" itemValue="#{somtrasvar.codigo}"/>
                        </p:selectOneMenu>
                        <h:outputText value="Bodega Destino" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{man_inventario.tra_cod_bod}" 
                                         style="width:300px;text-align:right;"
                                         autoWidth="false"
                                         filter="true"
                                         filterMatchMode="contains"
                                         >  
                            <f:selectItem itemLabel="Seleccione una" itemValue="0" /> 
                            <f:selectItems value="#{man_inventario.bodegas}" var="somtrasbodvar"
                                           itemLabel="#{somtrasbodvar.descripcion}" itemValue="#{somtrasbodvar.codigo}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                </p:panel>
                <br></br>
                <div align="center">
                    <h:panelGrid columns="2" cellpadding="5">
                        <p:commandButton value="Trasladar" style="width: 100px;"
                                         icon="fa fa-exchange"
                                         actionListener="#{man_inventario.trasladar()}"
                                         update=":frmTrasladoInvArt"
                                         />
                        <p:commandButton value="Cerrar" style="width: 100px;"
                                         icon="fa fa-times"
                                         onclick="PF('wTrasladoInvArt').hide()"
                                         actionListener="#{man_inventario.cerrartraslado()}"
                                         update=":frmInventarioPro"
                                         />

                    </h:panelGrid>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog  id="dlgCargarVencidos" widgetVar="wCargarVencidos" modal="true" 
                   width="400" height="150" closable="false" resizable="false" 
                   header="Cargar Producto Vencido" rendered="true" 
                   dynamic="true" visible="false" 
                   >
            <h:form id="frmCargarVencidos"> 
                <p:growl id="msgCargarVencidos" showDetail="true" life="8500"/>
                <p:panel>
                    <h:panelGrid columns="1" cellpadding="5">
                        <h:outputText value="Bodega Origen" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{man_inventario.ven_cod_bod}" 
                                         style="width:300px;text-align:right;"
                                         autoWidth="false"
                                         filter="true"
                                         filterMatchMode="contains"
                                         >  
                            <f:selectItem itemLabel="Seleccione una" itemValue="0" /> 
                            <f:selectItems value="#{man_inventario.bodegas}" var="somcarvenbodvar"
                                           itemLabel="#{somcarvenbodvar.descripcion}" itemValue="#{somcarvenbodvar.codigo}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                </p:panel>
                <br></br>
                <div align="center">
                    <h:panelGrid columns="2" cellpadding="5">
                        <p:commandButton value="Cargar" style="width: 100px;"
                                         icon="fa fa-bug"
                                         actionListener="#{man_inventario.llenarVencidos()}"
                                         update=":frmCargarVencidos"
                                         />
                        <p:commandButton value="Cerrar" style="width: 100px;"
                                         icon="fa fa-times"
                                         onclick="PF('wCargarVencidos').hide()"
                                         actionListener="#{man_inventario.cerrarvencidos()}"
                                         update=":frmInventarioPro"
                                         />

                    </h:panelGrid>
                </div>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ********************* Pantalla Existencias Lotes ***********************
        *********************************************************************-->

        <p:dialog  id="dlgExistenciasLot" widgetVar="wExistenciasLot" modal="true" minimizable="false"
                   width="1100" height="460" closable="false" resizable="false" 
                   header="Consulta de Existencias" rendered="true" 
                   dynamic="true" visible="false" 
                   >

            <h:form id="frmExistenciasLot"> 
                <p:toolbar>

                    <f:facet name="right">
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wExistenciasLot').hide()"
                                         icon="ui-icon-close"
                                         actionListener="#{man_inventario.cerrarventanaexistencias()}"
                                         update=":frmExistenciasLot"
                                         />
                    </f:facet>
                </p:toolbar>
                <p:panel>
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputText value="País" style="font-weight:bold;"/>
                        <h:outputText value="Bodega" style="font-weight:bold;"/>

                        <p:selectOneMenu value="#{man_inventario.paibus}" 
                                         style=" width: 180px;"
                                         autoWidth="false"
                                         >
                            <p:ajax event="change" listener="#{man_inventario.llenarBodegasbus()}" 
                                    update="sombodprobus" />
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{man_inventario.paisesbus}" var="lstpaiprobus"
                                           itemLabel="#{lstpaiprobus.descripcion}" itemValue="#{lstpaiprobus.codigo}"/> 
                        </p:selectOneMenu>
                        <p:selectOneMenu id="sombodprobus" 
                                         value="#{man_inventario.bodbus}" 
                                         style=" width: 180px;"
                                         autoWidth="false"
                                         >
                            <f:selectItem itemLabel="Seleccione Una" itemValue="0"/>
                            <f:selectItems value="#{man_inventario.bodegasbus}" var="lstbodprobus"
                                           itemLabel="#{lstbodprobus.descripcion}" itemValue="#{lstbodprobus.codigo}"/> 
                        </p:selectOneMenu>

                    </h:panelGrid>
                    <h:panelGrid columns="4" cellpadding="5">
                        <h:outputText value="Producto" style="font-weight:bold;"/>
                        <h:outputText value="Lote" style="font-weight:bold;"/>
                        <h:outputText value="" style="font-weight:bold;"/>
                        <h:outputText value="" style="font-weight:bold;"/>
                        <p:selectOneMenu value="#{man_inventario.probus}" 
                                         style=" width: 610px;"
                                         filter="true" 
                                         filterMatchMode="contains"
                                         autoWidth="false"
                                         >
                            <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                            <f:selectItems value="#{man_inventario.productos}" var="lstpiepro"
                                           itemLabel="#{lstpiepro.descripcion}" itemValue="#{lstpiepro.codigo}"/> 
                        </p:selectOneMenu>

                        <p:selectBooleanCheckbox  value="#{man_inventario.chklot}">
                            <p:ajax event="change" listener="#{man_inventario.onchklotchange()}" update="txtlotbus"/>
                        </p:selectBooleanCheckbox>
                        <p:inputText id="txtlotbus" maxlength="12" size="15" value="#{man_inventario.lotbus}" disabled="#{!man_inventario.chklot}"/>

                        <p:commandButton title="Consultar" 
                                         icon="ui-icon-search" 
                                         style=" width: 30px;" 
                                         actionListener="#{man_inventario.consultarexistencias()}"
                                         update=":frmExistenciasLot"
                                         />
                    </h:panelGrid>

                    <p:dataTable id="dtExistenciasLot" var="vExisLot" widgetVar="wDTExistenciasLot"
                                 value="#{man_inventario.lotesvencimiento}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{man_inventario.catlotesvencimiento}" 
                                 rowKey="#{vExisLot.cod_bod},#{vExisLot.cod_ubi},#{vExisLot.cod_art},#{vExisLot.cod_emb},#{vExisLot.num_lot},#{vExisLot.fec_ven}"
                                 editable="false" 
                                 style="width:1060px;"
                                 scrollable="true"
                                 scrollHeight="190"
                                 >

                        <f:facet name="header">
                            <p:outputPanel>
                                <h:panelGrid columns="4" cellpadding="1" styleClass="noBorders">

                                    <h:panelGrid columns="2" cellpadding="2">
                                        <h:commandLink>
                                            <p:graphicImage value="/resources/images/xls_download.png" width="28" title="Excel"/>
                                            <p:dataExporter type="xls" target="dtExistenciasLot" fileName="ExistenciasLotes" />
                                        </h:commandLink>
                                        <h:commandLink>
                                            <p:graphicImage value="/resources/images/pdf_download.png" width="28" title="PDF"/>
                                            <p:dataExporter type="pdf" target="dtExistenciasLot" fileName="ExistenciasLotes"/>
                                        </h:commandLink>
                                    </h:panelGrid>

                                    <h:outputText value="Filtrar:" />
                                    <p:inputText id="globalFilter" 
                                                 onkeyup="PF('wDTExistenciasLot').filter()" 
                                                 style="width:250px" 
                                                 placeholder="Expresión Filtro"
                                                 />
                                </h:panelGrid>
                            </p:outputPanel>
                        </f:facet>
                        <p:column style="width:20px" headerText="Sucursal" filterBy="#{vExisLot.nompai}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vExisLot.nompai}" />
                        </p:column>
                        <p:column style="width:30px" headerText="Bodega" filterBy="#{vExisLot.mombod}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vExisLot.mombod}" />
                        </p:column>

                        <p:column style="width:130px" headerText="Artículo" filterBy="#{vExisLot.nomart}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vExisLot.nomart}" />
                        </p:column>
                        <p:column style="width:50px" headerText="Uni.Med" filterBy="#{vExisLot.nomemb}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vExisLot.nomemb}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Lote" filterBy="#{vExisLot.num_lot}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vExisLot.num_lot}" />
                        </p:column>
                        <p:column style="width:40px" headerText="Vencimiento" filterBy="#{vExisLot.fec_ven}" 
                                  filterMatchMode="contains"  filterStyle="display:none; visibility:hidden;" >
                            <h:outputText value="#{vExisLot.fec_ven}" />
                        </p:column>
                        <p:column style="width:25px;" headerText="Existencia" >
                            <h:outputText value="#{vExisLot.exi_act}" />
                        </p:column>

                    </p:dataTable>
                </p:panel> 
            </h:form>
        </p:dialog>



        <!-- **************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ********************************************************************    COMPRAS    ********************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************************************************************************************************************-->

        <!-- *******************************************************************
        **************************** INGRESO DE COMPRAS ************************
        *********************************************************************-->
        <p:dialog  id="dlgIngresoCompras" widgetVar="wIngresoCompras" modal="true" 
                   width="900" height="500" closable="false" resizable="false" 
                   header="Ingreso de Compras" rendered="true" 
                   dynamic="false" visible="false" style="background-color: #deedf7;"
                   >

            <h:form id="frmIngresoCompras"> 
                <p:growl id="msgIngresoCompras" showDetail="true" life="8500"/>
                <p:toolbar >
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" styleClass="BotonNuevo"
                                         actionListener="#{man_inventario.nuevoarticulo()}"
                                         update=":frmIngresoCompras"
                                         icon="fa fa-file-o"
                                         />
                        <p:commandButton value="Editar" styleClass="BotonEditar"
                                         actionListener="#{man_inventario.editararticulo()}"
                                         icon="fa fa-pencil"
                                         />
                        <p:commandButton value="Guardar" styleClass="BotonGuardar"
                                         actionListener="#{man_inventario.guardararticulo()}"
                                         update=":frmIngresoCompras"
                                         icon="fa fa-floppy-o"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="fa fa-exclamation-triangle"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" styleClass="BotonEliminar"
                                         actionListener="#{man_inventario.eliminararticulo()}"
                                         update=":frmIngresoCompras"
                                         icon="fa fa-trash-o"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="fa fa-exclamation-triangle"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" styleClass="BotonCerrar"
                                         onclick="PF('wIngresoCompras').hide()"
                                         actionListener="#{man_inventario.cerrarventana()}"
                                         update=":frmIngresoCompras"
                                         icon="fa fa-times"
                                         />

                    </f:facet>
                </p:toolbar>
                <p:panel styleClass="noBorders">
                    <div style=" background-color: #435055;">

                    </div>
                </p:panel>
            </h:form>
        </p:dialog>



        <!-- **************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        **************************************************************    RECURSOS HUMANOS    *****************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************************************************************************************************************-->


        <!--******************************************************************** 
        ***************** Pantalla mantenimiento de Personal  ******************
        *********************************************************************-->

        <p:dialog  id="dlgPersonal" widgetVar="wPersonal" modal="true" 
                   width="625" height="560" closable="false" resizable="false" 
                   header="Control de Personal" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmPersonal"> 
                <p:growl id="msgPersonal" showDetail="true" life="6500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manPersonas.nuevo()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manPersonas.guardar()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manPersonas.eliminar()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wPersonal').hide()"
                                         actionListener="#{manPersonas.cerrarventana()}"
                                         update=":frmPersonal"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color: #D4DEDF;">
                        <p:focus for="txtnombreper" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombres" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:inputText id="txtnombreper" 
                                             size="28"
                                             maxlength="30"
                                             value="#{manPersonas.nombres}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="20"/>
                                <h:outputText value="Apellidos" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtapellidosper" 
                                             size="28"
                                             maxlength="30"
                                             value="#{manPersonas.apellidos}"
                                             onfocus="this.select()"
                                             />
                            </h:panelGroup>
                            <h:outputText value="Dirección" style="font-weight:bold;"/>
                            <p:inputText id="txtdireccionper" 
                                         size="70"
                                         maxlength="150"
                                         value="#{manPersonas.direccion}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Teléfono" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:inputText id="txttelefonoper" 
                                             size="10"
                                             maxlength="8"
                                             value="#{manPersonas.telefono}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="Celular" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtcelularper" 
                                             size="10"
                                             maxlength="8"
                                             value="#{manPersonas.celular}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="E-Mail" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtemailper" 
                                             size="30"
                                             maxlength="50"
                                             value="#{manPersonas.email}"
                                             onfocus="this.select()"
                                             />
                            </h:panelGroup>
                            <h:outputText value="Dui" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:inputText id="txtduiper" 
                                             size="12"
                                             maxlength="10"
                                             value="#{manPersonas.dui}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="Nit" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtnitper" 
                                             size="20"
                                             maxlength="14"
                                             value="#{manPersonas.nit}"
                                             onfocus="this.select()"
                                             />
                                <p:spacer width="10"/>
                                <h:outputText value="ISSS" style="font-weight:bold;"/>
                                <p:spacer width="12"/>
                                <p:inputText id="txtisssper" 
                                             size="22"
                                             maxlength="20"
                                             value="#{manPersonas.isss}"
                                             onfocus="this.select()"
                                             />
                            </h:panelGroup>
                            <h:outputText value="Area" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:selectOneMenu value="#{manPersonas.cod_dep}" 
                                                 style=" width: 160px;">
                                    <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                    <f:selectItems value="#{manPersonas.departamentos}" var="depmanper"
                                                   itemLabel="#{depmanper.nom_dep}" itemValue="#{depmanper.cod_dep}"/> 
                                </p:selectOneMenu>
                                <p:spacer width="20"/>
                                <h:outputText value="Codigo" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:inputText id="txtcodigoper" 
                                             size="28"
                                             maxlength="30"
                                             value="#{manPersonas.codigo}"
                                             onfocus="this.select()"
                                             />
                            </h:panelGroup>
                            <h:outputText value="Jefe Inmediato" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:selectOneMenu value="#{manPersonas.id_jef}" 
                                                 id="txtjefeper" 
                                                 style="width:225px;text-align:right;"
                                                 immediate="false">

                                    <f:selectItem itemLabel="Seleccione Uno" itemValue="0" />  
                                    <f:selectItems value="#{manPersonas.jefes}" var="mjefeper"
                                                   itemLabel="#{mjefeper.nombres} #{mjefeper.apellidos}" itemValue="#{mjefeper.id_per}"/>
                                </p:selectOneMenu>
                                <p:spacer width="20"/>
                                <h:outputText value="Fecha Ingreso" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:calendar  pattern="dd/MM/yyyy " locale="es" 
                                             readonlyInput="true" showOn="button" size="10"
                                             style="width: 20px"
                                             value="#{manPersonas.dfingreso}" 
                                             navigator="true"
                                             >
                                    <p:ajax event="dateSelect" listener="#{manPersonas.dateSelectedFingreso}" />
                                </p:calendar> 
                            </h:panelGroup> 
                            <h:outputText value="Cargo" style="font-weight:bold;"/>
                            <h:panelGroup>
                                <p:selectOneMenu value="#{manPersonas.id_car}" 
                                                 style="width:180px;text-align:right;"
                                                 immediate="false"
                                                 >  
                                    <f:selectItem itemLabel="Seleccione Uno" itemValue="0" />  
                                    <f:selectItems value="#{manPersonas.cargos}" var="mpercar"
                                                   itemLabel="#{mpercar.des_car}" itemValue="#{mpercar.id_car}"/>
                                </p:selectOneMenu>
                                <p:spacer width="20"/>
                                <h:outputText value="Usuario" style="font-weight:bold;"/>
                                <p:spacer width="10"/>
                                <p:selectOneMenu value="#{manPersonas.usuario}" 
                                                 style="width:150px;text-align:right;"
                                                 immediate="false"
                                                 >  
                                    <f:selectItem itemLabel="Seleccione Uno" itemValue="0" />  
                                    <f:selectItems value="#{manPersonas.usuarios}" var="mperusu"
                                                   itemLabel="#{mperusu.nom_usu}" itemValue="#{mperusu.cod_usu}"/>
                                </p:selectOneMenu>                           
                            </h:panelGroup>
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtPersonal" var="vPersonal" 
                                 value="#{manPersonas.personas}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manPersonas.catpersonas}" 
                                 rowKey="#{vPersonal.id_per}"
                                 editable="false"
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:565px"
                                 paginator="true"
                                 rows ="5"
                                 paginatorPosition="top"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 >
                        <p:ajax event="rowSelect" listener="#{manPersonas.onRowSelect}" 
                                update=":frmPersonal"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:110px" headerText="Nombres" sortBy="#{vPersonal.nombres}" filterBy="#{vPersonal.nombres}">
                            <h:outputText value="#{vPersonal.nombres}" />
                        </p:column>
                        <p:column style="width:110px" headerText="Apellidos" sortBy="#{vPersonal.apellidos}" filterBy="#{vPersonal.apellidos}">
                            <h:outputText value="#{vPersonal.apellidos}" />
                        </p:column>
                        <p:column style="width:60px" headerText="Teléfono">
                            <h:outputText value="#{vPersonal.telefono}" />
                        </p:column>
                        <p:column style="width:150px" headerText="E-Mail">
                            <h:outputText value="#{vPersonal.email}" />
                        </p:column>

                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        **************** Pantalla mantenimiento de Cargos **********************
        *********************************************************************-->

        <p:dialog  id="dlgCargo" widgetVar="wCargo" modal="true" 
                   width="460" height="290" closable="false" resizable="false" 
                   header="Mantenimiento de Cargos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmCargo"> 
                <p:growl id="msgCargo" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manCargos.nuevo()}"
                                         update=":frmCargo"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manCargos.guardar()}"
                                         update=":frmCargo"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manCargos.eliminar()}"
                                         update=":frmCargo"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wCargo').hide()"
                                         actionListener="#{manCargos.cerrarventana()}"
                                         update=":frmCargo"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #ebf8fe;">
                        <p:focus for="txtnombrecargo" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtnombrecargo" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manCargos.des_car}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtCargo" var="vCargo" 
                                 value="#{manCargos.cargos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manCargos.catcargos}" 
                                 rowKey="#{vCargo.id_car}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="120"
                                 style="width:400px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manCargos.onRowSelect}" 
                                update=":frmCargo"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vCargo.id_car}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Nombre">
                            <h:outputText value="#{vCargo.des_car}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>



        <!-- **************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ***********************************************************    SEGURIDAD    ***************************************************************************************
        *******************************************************************************************************************************************************************
        *******************************************************************************************************************************************************************
        ****************************************************************************************************************************************************************-->


        <!--******************************************************************** 
        ********* Pantalla mantenimiento de Grupos de Seguridad ****************
        *********************************************************************-->

        <p:dialog  id="dlgGrupo" widgetVar="wGrupo" modal="true" 
                   width="440" height="290" closable="false" resizable="false" 
                   header="Mantenimiento de Grupos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmGrupo"> 
                <p:growl id="msgGrupo" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manGrupos.nuevo()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manGrupos.guardar()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manGrupos.eliminar()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wGrupo').hide()"
                                         actionListener="#{manGrupos.cerrarventana()}"
                                         update=":frmGrupo"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #dfecf1;">
                        <p:focus for="txtdescripciongrupo" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Nombre" style="font-weight:bold;"/>
                            <p:inputText id="txtdescripciongrupo" 
                                         size="45"
                                         maxlength="50"
                                         value="#{manGrupos.des_grp}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtGrupo" var="vGrupo" 
                                 value="#{manGrupos.grupos}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manGrupos.catgrupos}" 
                                 rowKey="#{vGrupo.id_grp}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="160"
                                 style="width:380px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manGrupos.onRowSelect}" 
                                update=":frmGrupo"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vGrupo.id_grp}" />
                        </p:column>
                        <p:column style="width:300px" headerText="Nombre">
                            <h:outputText value="#{vGrupo.des_grp}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        ****** Pantalla mantenimiento de Controles de aplicación ***************
        *********************************************************************-->

        <p:dialog  id="dlgControl" widgetVar="wControl" modal="true" 
                   width="800" height="390" closable="false" resizable="false" 
                   header="Mantenimiento de Controles" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmControl"> 
                <p:growl id="msgControl" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manControles.nuevo()}"
                                         update=":frmControl"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manControles.guardar()}"
                                         update=":frmControl"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manControles.eliminar()}"
                                         update=":frmControl"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wControl').hide()"
                                         actionListener="#{manControles.cerrarventana()}"
                                         update=":frmControl"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #d3f2ff;">
                        <p:focus for="ommodulocontrol" />
                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputText value="Modulo" style="font-weight:bold;" />
                            <p:selectOneMenu id="ommodulocontrol" value="#{manControles.id_mod}" style=" width: 150px;">
                                <p:ajax event="change" listener="#{manControles.llenarControlesPorModulo()}" update=":frmControl"/>
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manControles.modulos}" var="modusu"
                                               itemLabel="#{modusu.des_mod}" itemValue="#{modusu.id_mod}"/> 
                            </p:selectOneMenu>
                            <h:outputText value="Identificador" style="font-weight:bold;"/>
                            <p:inputText id="txtsidcontrol" 
                                         size="50"
                                         maxlength="50"
                                         value="#{manControles.sid_ctrl}"
                                         onfocus="this.select()"
                                         />
                            <h:outputText value="Descripción" style="font-weight:bold;"/>
                            <p:inputText id="txtdescripcioncontrol" 
                                         size="50"
                                         maxlength="150"
                                         value="#{manControles.ctrl_desc}"
                                         onfocus="this.select()"
                                         />
                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtControl" var="vControl" 
                                 value="#{manControles.controles}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manControles.catcontroles}" 
                                 rowKey="#{vControl.cod_ctrl}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="160"
                                 style="width:760px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manControles.onRowSelect}" 
                                update=":frmControl"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:10px" headerText="Id">
                            <h:outputText value="#{vControl.cod_ctrl}" />
                        </p:column>
                        <p:column style="width:60px" headerText="Módulo">
                            <h:outputText value="#{vControl.modulo}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Nombre">
                            <h:outputText value="#{vControl.sid_ctrl}" />
                        </p:column>
                        <p:column style="width:200px" headerText="Descripción">
                            <h:outputText value="#{vControl.ctrl_desc}" />
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        *********** Pantalla de Asignación de usuarios a grupos ****************
        *********************************************************************-->

        <p:dialog  id="dlgUsrGrp" widgetVar="wUsrGrp" modal="true" 
                   width="600" height="390" closable="false" resizable="false" 
                   header="Asignación de Usuarios a Grupos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmUsrGrp"> 
                <p:growl id="msgUsrGrp" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manUserGroup.nuevo()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manUserGroup.guardar()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manUserGroup.eliminar()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wUsrGrp').hide()"
                                         actionListener="#{manUserGroup.cerrarventana()}"
                                         update=":frmUsrGrp"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #dfecf1;">
                        <p:focus for="omgrupousrgrp" />
                        <h:panelGrid columns="4" cellpadding="5">
                            <h:outputText value="Grupo" style="font-weight:bold;" />
                            <p:selectOneMenu id="omgrupousrgrp" value="#{manUserGroup.id_grp}" style=" width: 200px;">
                                <p:ajax event="change" listener="#{manUserGroup.llenarUserGroupPorGrupo()}" update=":frmUsrGrp" />
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manUserGroup.grupos}" var="manusrgrpgroup"
                                               itemLabel="#{manusrgrpgroup.des_grp}" itemValue="#{manusrgrpgroup.id_grp}"/> 
                            </p:selectOneMenu>

                            <h:outputText value="Usuario" style="font-weight:bold;" />
                            <p:selectOneMenu id="omusuariousrgrp" 
                                             value="#{manUserGroup.cod_usu}" 
                                             style=" width: 170px;"
                                             filter="true"
                                             filterMatchMode="contains"
                                             >
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manUserGroup.usuarios}" var="manusrgrpuser"
                                               itemLabel="#{manusrgrpuser.nom_usu}" itemValue="#{manusrgrpuser.cod_usu}"/> 
                            </p:selectOneMenu>

                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtUsrGrp" var="vUsrGrp" 
                                 value="#{manUserGroup.usergroup}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manUserGroup.catusergroup}" 
                                 rowKey="#{vUsrGrp.id_usr_grp}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="240"
                                 style="width:540px"
                                 >
                        <p:ajax event="rowSelect" listener="#{manUserGroup.onRowSelect}" 
                                update=":frmUsrGrp"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:30px" headerText="Id">
                            <h:outputText value="#{vUsrGrp.id_usr_grp}" />
                        </p:column>
                        <p:column style="width:120px" headerText="Grupo">
                            <h:outputText value="#{vUsrGrp.grupo}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Usuario">
                            <h:outputText value="#{vUsrGrp.usuario}" />
                        </p:column>

                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>

        <!--******************************************************************** 
        **********   Pantalla de Registro de derechos de seguridad  ************
        *********************************************************************-->

        <p:dialog  id="dlgSecurity" widgetVar="wSecurity" modal="true" 
                   width="800" height="470" closable="false" resizable="false" 
                   header="Asignación de Permisos" rendered="true" 
                   dynamic="false" visible="false" 
                   >

            <h:form id="frmSecurity"> 
                <p:growl id="msgSecurity" showDetail="true" life="4500"/>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Nuevo" style=" width: 100px;"
                                         actionListener="#{manSeguridad.nuevo()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-document"
                                         />
                        <p:commandButton value="Guardar" style=" width: 100px;"
                                         actionListener="#{manSeguridad.guardar()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-disk"
                                         > 
                            <p:confirm header="Guardar Registro" 
                                       message="¿Realmente desea Guardar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Eliminar" style=" width: 100px;"
                                         actionListener="#{manSeguridad.eliminar()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-trash"
                                         >
                            <p:confirm header="Eliminar Registro" 
                                       message="¿Realmente desea eliminar este Registro?" 
                                       icon="ui-icon-alert"/>
                        </p:commandButton>
                        <p:commandButton value="Cerrar" style=" width: 100px;"
                                         onclick="PF('wSecurity').hide()"
                                         actionListener="#{manSeguridad.cerrarventana()}"
                                         update=":frmSecurity"
                                         icon="ui-icon-close"
                                         />

                    </f:facet>
                </p:toolbar>

                <p:panel>
                    <div style=" background-color:  #dfecf1;">
                        <p:focus for="ommodsecurity" />
                        <h:panelGrid columns="4" cellpadding="5">
                            <h:outputText value="Grupo" style="font-weight:bold;" />
                            <p:selectOneMenu id="omgrpsecurity" value="#{manSeguridad.id_grp}" style=" width: 200px;">
                                <p:ajax event="change" listener="#{manSeguridad.onSelectGrupo()}" update=":frmSecurity" />
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manSeguridad.grupos}" var="mangrpsecurity"
                                               itemLabel="#{mangrpsecurity.des_grp}" itemValue="#{mangrpsecurity.id_grp}"/> 
                            </p:selectOneMenu>
                            <h:outputText value="Usuario" style="font-weight:bold;" />
                            <h:panelGroup>
                                <p:selectOneMenu id="omususecurity" 
                                                 value="#{manSeguridad.cod_usu}" 
                                                 style=" width: 200px;"
                                                 filter="true" filterMatchMode="contains"
                                                 >
                                    <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                    <f:selectItems value="#{manSeguridad.usuarios}" var="manususecurity"
                                                   itemLabel="#{manususecurity.nom_usu}" itemValue="#{manususecurity.cod_usu}"/> 
                                </p:selectOneMenu>
                                <p:spacer width="20"/>
                                <h:outputLabel value="Activo: " style="font-weight:bold;" />
                                <p:spacer width="10"/>
                                <p:selectBooleanButton value="#{manSeguridad.activo}" onLabel="Si" offLabel="No" style="width:30px" />
                            </h:panelGroup>

                            <h:outputText value="Módulo" style="font-weight:bold;" />
                            <p:selectOneMenu id="ommodsecurity" 
                                             value="#{manSeguridad.id_mod}" 
                                             style=" width: 200px;">
                                <p:ajax event="change" listener="#{manSeguridad.onSelectGrupo()}" update=":frmSecurity" />
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manSeguridad.modulos}" var="manmodsecurity"
                                               itemLabel="#{manmodsecurity.des_mod}" itemValue="#{manmodsecurity.id_mod}"/> 
                            </p:selectOneMenu>

                            <h:outputText value="Control" style="font-weight:bold;" />
                            <p:selectOneMenu id="omctrlsecurity" 
                                             value="#{manSeguridad.cod_ctrl}" 
                                             style=" width: 300px;"
                                             filter="true" filterMatchMode="contains"
                                             >
                                <f:selectItem itemLabel="Ninguno" itemValue="0"/>
                                <f:selectItems value="#{manSeguridad.controles}" var="manctrlsecurity"
                                               itemLabel="#{manctrlsecurity.ctrl_desc}" itemValue="#{manctrlsecurity.cod_ctrl}"/> 
                            </p:selectOneMenu>



                        </h:panelGrid>
                    </div>
                </p:panel>

                <p:panel>
                    <p:dataTable id="dtSecurity" var="vSecurity" 
                                 value="#{manSeguridad.seguridad}" 
                                 emptyMessage="No se encontraron resultados" 
                                 selectionMode="single" selection="#{manSeguridad.catseguridad}" 
                                 rowKey="#{vSecurity.cod_sec}"
                                 editable="false" 
                                 scrollable="true"
                                 scrollHeight="280"
                                 style="width:740px; "
                                 >
                        <p:ajax event="rowSelect" listener="#{manSeguridad.onRowSelect}" 
                                update=":frmSecurity"/>
                        <p:ajax event="rowUnselect"/>

                        <p:column style="width:20px" headerText="Id">
                            <h:outputText value="#{vSecurity.cod_sec}" />
                        </p:column>
                        <p:column style="width:150px" headerText="Control">
                            <h:outputText value="#{vSecurity.control}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Grupo">
                            <h:outputText value="#{vSecurity.grupo}" />
                        </p:column>
                        <p:column style="width:100px" headerText="Usuario">
                            <h:outputText value="#{vSecurity.usuario}" />
                        </p:column>
                        <p:column style="width:70px; text-align:center;" headerText="Activo">
                            <p:selectBooleanCheckbox value="#{vSecurity.activo}" disabled="true" />
                        </p:column>                        
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>
               
    </h:body>

</html>
